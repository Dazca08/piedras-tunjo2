(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{rnD0:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("iTUp"),r=n("tyNb"),c=n("PSD3"),a=n.n(c),s=n("fXoL"),b=n("mrSG"),d=n("tk/3");const u=n("AytR").a.apiUrl;let l=(()=>{class e{constructor(e,t){this.http=e,this.router=t}prepareHeaders(){const e=localStorage.getItem("token")||void 0;return e?(this.headers=new d.c({Authorization:"Bearer "+e}),!0):(this.router.navigateByUrl("/login"),!1)}ObtenerJson(){return this.prepareHeaders()||console.log("Token not found"),this.http.get(`${u}/pqr`,{headers:this.headers})}Eliminar(e){return Object(b.a)(this,void 0,void 0,(function*(){const t=localStorage.getItem("token")||void 0,n=new d.c({Authorization:"Bearer "+t});return new Promise((t,i)=>{this.http.delete(`${u}/pqr`+"/"+e,{headers:n}).toPromise()})}))}update(e,t){return Object(b.a)(this,void 0,void 0,(function*(){const n=localStorage.getItem("token")||void 0,i=new d.c({Authorization:"Bearer "+n});return new Promise((n,o)=>{this.http.put(`${u}/pqr`+"/responder/"+t,e,{headers:i}).toPromise()})}))}}return e.\u0275fac=function(t){return new(t||e)(s.cc(d.a),s.cc(r.b))},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n("3Pt+"),h=n("oOf3");let p=(()=>{class e{transform(e,t){if(""===t||t.length<3)return e;const n=[];for(const i of e)i.Pregunta.toLowerCase().indexOf(t.toLowerCase())>-1&&n.push(i);return console.log(n),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Sb({name:"filtropqrs",type:e,pure:!0}),e})();function f(e,t){1&e&&(s.Yb(0,"div"),s.Ub(1,"hr"),s.Yb(2,"div"),s.Yb(3,"h6"),s.zc(4,"Lo sentimos en este momento no existen pqrs sin responder"),s.Xb(),s.Xb(),s.Xb())}function m(e,t){1&e&&(s.Yb(0,"div"),s.Ub(1,"hr"),s.Yb(2,"div"),s.Yb(3,"h6"),s.zc(4,"Lo sentimos en este momento no existen pqrs respondidos"),s.Xb(),s.Xb(),s.Xb())}function X(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",20),s.Yb(1,"div",21),s.Yb(2,"div",22),s.Yb(3,"h5"),s.Ub(4,"i",23),s.zc(5),s.Xb(),s.Xb(),s.Yb(6,"div",24),s.Yb(7,"form",25,26),s.gc("ngSubmit",(function(){s.uc(e);const t=s.tc(8);return s.ic(2).guardar(t)})),s.Yb(9,"p",27),s.zc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Xb(),s.Yb(11,"p",27),s.Ub(12,"i",28),s.zc(13),s.Xb(),s.Yb(14,"p",27),s.Ub(15,"i",29),s.zc(16),s.Xb(),s.Yb(17,"input",30,31),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.FechaPublicacion=n})),s.Xb(),s.Yb(19,"input",32,33),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.FechaRespuesta=n})),s.Xb(),s.Yb(21,"input",34,35),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Id=n})),s.Xb(),s.Yb(23,"input",36,37),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.LastModification=n})),s.Xb(),s.Yb(25,"input",38,39),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Pregunta=n})),s.Xb(),s.Yb(27,"p",27),s.Ub(28,"i",40),s.zc(29," Ingrese la respuesta "),s.Xb(),s.Yb(30,"textarea",41),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Respuesta=n})),s.Xb(),s.Ub(31,"br"),s.Yb(32,"input",42,43),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Respuesta=n})),s.Xb(),s.Yb(34,"input",44,45),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Token=n})),s.Xb(),s.Yb(36,"input",46,47),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UEstadoPQR=n})),s.Xb(),s.Yb(38,"input",48,49),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UEstadoPQRId=n})),s.Xb(),s.Yb(40,"input",50,51),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UUsuario=n})),s.Xb(),s.Yb(42,"input",52,53),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UUsuarioId=n})),s.Xb(),s.Ub(44,"br"),s.Yb(45,"div",4),s.Yb(46,"button",54),s.Ub(47,"i",55),s.zc(48," Enviar respuesta "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=t.$implicit;s.Hb(5),s.Bc(" Asunto: ",e.Pregunta,""),s.Hb(8),s.Cc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Hb(3),s.Bc(" fecha de la peticion : ",e.FechaPublicacion," "),s.Hb(1),s.mc("ngModel",e.FechaPublicacion),s.Hb(2),s.mc("ngModel",e.FechaRespuesta),s.Hb(2),s.mc("ngModel",e.Id),s.Hb(2),s.mc("ngModel",e.LastModification),s.Hb(2),s.mc("ngModel",e.Pregunta),s.Hb(5),s.mc("ngModel",e.Respuesta),s.Hb(2),s.mc("ngModel",e.Respuesta),s.Hb(2),s.mc("ngModel",e.Token),s.Hb(2),s.mc("ngModel",e.UEstadoPQR),s.Hb(2),s.mc("ngModel",e.UEstadoPQRId),s.Hb(2),s.mc("ngModel",e.UUsuario),s.Hb(2),s.mc("ngModel",e.UUsuarioId)}}const M=function(e){return{itemsPerPage:3,currentPage:e}};function Y(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div"),s.Yb(1,"section",14),s.Yb(2,"div",1),s.Yb(3,"div",15),s.Yb(4,"div",16),s.xc(5,X,49,16,"div",17),s.jc(6,"paginate"),s.jc(7,"filtropqrs"),s.Xb(),s.Yb(8,"div",18),s.Yb(9,"pagination-controls",19),s.gc("pageChange",(function(t){return s.uc(e),s.ic().PageActual=t})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=s.ic();s.Hb(5),s.mc("ngForOf",s.lc(6,1,s.lc(7,4,e.pqrs,e.filterpregunta),s.qc(7,M,e.PageActual)))}}function v(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",20),s.Yb(1,"div",21),s.Yb(2,"div",22),s.Yb(3,"h5"),s.Ub(4,"i",23),s.zc(5),s.Xb(),s.Xb(),s.Yb(6,"div",24),s.Yb(7,"form",25,26),s.gc("ngSubmit",(function(){s.uc(e);const t=s.tc(8);return s.ic(2).guardar(t)})),s.Yb(9,"p",27),s.zc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Xb(),s.Yb(11,"p",27),s.Ub(12,"i",28),s.zc(13),s.Xb(),s.Yb(14,"p",27),s.Ub(15,"i",29),s.zc(16),s.Xb(),s.Yb(17,"input",30,31),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.FechaPublicacion=n})),s.Xb(),s.Yb(19,"p",27),s.Ub(20,"i",29),s.zc(21),s.Xb(),s.Yb(22,"input",32,33),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.FechaRespuesta=n})),s.Xb(),s.Yb(24,"input",34,35),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Id=n})),s.Xb(),s.Yb(26,"input",36,37),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.LastModification=n})),s.Xb(),s.Yb(28,"input",38,39),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Pregunta=n})),s.Xb(),s.Yb(30,"p",27),s.Ub(31,"i",40),s.zc(32," Ingrese la respuesta "),s.Xb(),s.Yb(33,"textarea",41),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Respuesta=n})),s.zc(34,"Escribe aqu\xed tus comentarios"),s.Xb(),s.Ub(35,"br"),s.Yb(36,"input",42,43),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Respuesta=n})),s.Xb(),s.Yb(38,"input",44,45),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.Token=n})),s.Xb(),s.Yb(40,"input",46,47),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UEstadoPQR=n})),s.Xb(),s.Yb(42,"input",48,49),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UEstadoPQRId=n})),s.Xb(),s.Yb(44,"input",50,51),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UUsuario=n})),s.Xb(),s.Yb(46,"input",52,53),s.gc("ngModelChange",(function(n){return s.uc(e),t.$implicit.UUsuarioId=n})),s.Xb(),s.Ub(48,"br"),s.Yb(49,"div",2),s.Yb(50,"div",56),s.Yb(51,"div",4),s.Yb(52,"form",10),s.gc("submit",(function(){s.uc(e);const n=t.$implicit;return s.ic(2).eliminar(n.Id)})),s.Yb(53,"button",57),s.Ub(54,"i",58),s.zc(55," Eliminar "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(56,"div",56),s.Yb(57,"div",4),s.Yb(58,"button",59),s.Ub(59,"i",55),s.zc(60," Enviar "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=t.$implicit;s.Hb(5),s.Bc(" Asunto: ",e.Pregunta,""),s.Hb(8),s.Cc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Hb(3),s.Bc(" fecha de la peticion : ",e.FechaPublicacion," "),s.Hb(1),s.mc("ngModel",e.FechaPublicacion),s.Hb(4),s.Bc(" fecha de la Respuesta : ",e.FechaRespuesta," "),s.Hb(1),s.mc("ngModel",e.FechaRespuesta),s.Hb(2),s.mc("ngModel",e.Id),s.Hb(2),s.mc("ngModel",e.LastModification),s.Hb(2),s.mc("ngModel",e.Pregunta),s.Hb(5),s.mc("ngModel",e.Respuesta),s.Hb(3),s.mc("ngModel",e.Respuesta),s.Hb(2),s.mc("ngModel",e.Token),s.Hb(2),s.mc("ngModel",e.UEstadoPQR),s.Hb(2),s.mc("ngModel",e.UEstadoPQRId),s.Hb(2),s.mc("ngModel",e.UUsuario),s.Hb(2),s.mc("ngModel",e.UUsuarioId)}}function U(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div"),s.Yb(1,"section",14),s.Yb(2,"div",1),s.Yb(3,"div",15),s.Yb(4,"div",16),s.xc(5,v,61,17,"div",17),s.jc(6,"paginate"),s.jc(7,"filtropqrs"),s.Xb(),s.Yb(8,"div",18),s.Yb(9,"pagination-controls",19),s.gc("pageChange",(function(t){return s.uc(e),s.ic().PageActual=t})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&e){const e=s.ic();s.Hb(5),s.mc("ngForOf",s.lc(6,1,s.lc(7,4,e.pqrs,e.filterpregunta),s.qc(7,M,e.PageActual)))}}let P=(()=>{class e{constructor(e,t){this.servi=e,this.route=t,this.PageActual=1,this.i=0,this.fechatemp="",this.fechartemp="",this.filterpregunta="",this.indicador=!0,this.indicadorBoton="PQR Contestados"}ObtenerPqrs(){console.log(this.indicador),1==this.indicador?this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),n=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=n[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""==e.Respuesta),console.log(this.pqrs),console.log("Informacion ya tiene resultado")},e=>{console.log(JSON.stringify(e))}):0==this.indicador&&this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),n=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=n[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""!=e.Respuesta)},e=>{console.log(JSON.stringify(e))})}listarContestados(){1==this.indicador?(this.indicador=!1,this.indicadorBoton="PQR Sin contestar"):0==this.indicador&&(this.indicador=!0,this.indicadorBoton="PQR Contestados"),this.refrescar()}ngOnInit(){this.ObtenerPqrs()}eliminar(e){a.a.fire({title:"Estas seguro?",text:" No se podra recuperar la informacion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrar!"}).then(t=>{t.value&&(a.a.fire("Borrado!"," la informacion ha sido eliminada","success"),this.servi.Eliminar(e),this.refrescar())})}refrescar(){this.ObtenerPqrs(),this.ObtenerPqrs(),this.ngOnInit()}guardar({value:e}){console.log(e),""==e.Respuesta?a.a.fire("Por favor Ingrese una respuesta!","Respuesta no  enviada!","error"):e.Respuesta.length<10?a.a.fire("La respuesta debe tener como minimo 10 caracteres!","Respuesta no  enviada!","error"):a.a.fire({title:"Esta seguro?",text:"Desea enviar esta respuesta?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, guardar!"}).then(t=>{t.value&&(a.a.fire("Guardado!","La respuesta ha sido enviada ","success"),e.UEstadoPQRId=2,e.UEstadoPQR.Id=2,e.UEstadoPQR.Nombre="Resuelto",console.log(e),this.servi.update(e,e.Id),this.refrescar())})}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(l),s.Tb(r.b))},e.\u0275cmp=s.Nb({type:e,selectors:[["app-listar"]],decls:31,vars:7,consts:[["id","main-header",1,"py-2","bg-info","text-white"],[1,"container"],[1,"row"],[1,"col-md-4"],["align","center"],[1,"form-group"],["type","text","name","filterpregunta","placeholder","Buscar pqrs por Asunto ...",1,"form-control",3,"ngModel","ngModelChange"],[1,"fas","fa-list-ol"],[1,"display-4"],[1,"col-md-3"],[3,"submit"],["type","submit",1,"btn","btn-info"],[1,"fas","fa-list"],[4,"ngIf"],["id","pqrs"],[1,"col-md-12"],[1,"row","row-cols-1","row-cols-md-3"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"text-center"],[3,"pageChange"],[1,"col","mb-4"],[1,"card","h-100"],[1,"card-header"],[1,"fa","fa-question-circle"],[1,"car-body","container"],[3,"ngSubmit"],["pqrForm","ngForm"],[1,"card-text"],[1,"fa","fa-user"],[1,"fa","fa-calendar"],["type","hidden","name","FechaPublicacion",1,"form-control",3,"ngModel","ngModelChange"],["FechaPublicacion","ngModel"],["type","hidden","name","FechaRespuesta",1,"form-control",3,"ngModel","ngModelChange"],["FechaRespuesta","ngModel"],["type","hidden","name","Id",1,"form-control",3,"ngModel","ngModelChange"],["Id","ngModel"],["type","hidden","name","LastModification",1,"form-control",3,"ngModel","ngModelChange"],["LastModification","ngModel"],["type","hidden","name","Pregunta",1,"form-control",3,"ngModel","ngModelChange"],["Pregunta","ngModel"],[1,"fa","fa-pencil-alt"],["name","comentarios","rows","4","cols","38",3,"ngModel","ngModelChange"],["type","hidden","name","Respuesta",1,"form-control",3,"ngModel","ngModelChange"],["Respuesta","ngModel"],["type","hidden","name","Token",1,"form-control",3,"ngModel","ngModelChange"],["Token","ngModel"],["type","hidden","name","UEstadoPQR",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQR","ngModel"],["type","hidden","name","UEstadoPQRId",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQRId","ngModel"],["type","hidden","name","UUsuario",1,"form-control",3,"ngModel","ngModelChange"],["UUsuario","ngModel"],["type","hidden","name","UUsuarioId",1,"form-control",3,"ngModel","ngModelChange"],["UUsuarioId","ngModel"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","200"],[1,"fas","fa-share-square"],[1,"col-md-6"],["type","submit",1,"btn","btn-danger","btn-block",2,"width","130"],[1,"fas","fa-trash"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","130"]],template:function(e,t){1&e&&(s.Yb(0,"header",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"h1"),s.zc(6," Gestion De PQRS "),s.Xb(),s.Yb(7,"div",5),s.Yb(8,"input",6),s.gc("ngModelChange",(function(e){return t.filterpregunta=e})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(9,"div",3),s.Yb(10,"div",1),s.Yb(11,"div",4),s.Yb(12,"h3"),s.Ub(13,"i",7),s.zc(14," Total de pqrs "),s.Xb(),s.Yb(15,"h4",8),s.zc(16),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(17,"div",9),s.Yb(18,"div",1),s.Yb(19,"div",4),s.Ub(20,"br"),s.Yb(21,"form",10),s.gc("submit",(function(){return t.listarContestados()})),s.Yb(22,"button",11),s.Yb(23,"h4"),s.Ub(24,"i",12),s.zc(25),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.xc(26,f,5,0,"div",13),s.xc(27,m,5,0,"div",13),s.Ub(28,"br"),s.xc(29,Y,10,9,"div",13),s.xc(30,U,10,9,"div",13)),2&e&&(s.Hb(8),s.mc("ngModel",t.filterpregunta),s.Hb(8),s.Bc(" ",null==t.pqrs?null:t.pqrs.length," "),s.Hb(9),s.Bc(" ",t.indicadorBoton,""),s.Hb(1),s.mc("ngIf",0==t.pqrs.length&&"PQR Contestados"==t.indicadorBoton),s.Hb(1),s.mc("ngIf",0==t.pqrs.length&&"PQR Sin contestar"==t.indicadorBoton),s.Hb(2),s.mc("ngIf",1==t.indicador),s.Hb(1),s.mc("ngIf",0==t.indicador))},directives:[g.a,g.g,g.j,g.s,g.h,g.i,i.k,i.j,h.c],pipes:[h.b,p],styles:[""]}),e})();n.d(t,"ListarModule",(function(){return C}));let C=(()=>{class e{}return e.\u0275mod=s.Rb({type:e}),e.\u0275inj=s.Qb({factory:function(t){return new(t||e)},imports:[[i.b,g.e,h.a,o.a,r.e.forChild([{path:"",component:P}])]]}),e})()}}]);