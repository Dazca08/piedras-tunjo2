(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{rnD0:function(e,n,t){"use strict";t.r(n);var o=t("ofXK"),r=t("iTUp"),i=t("tyNb"),a=t("PSD3"),c=t.n(a),b=t("fXoL"),d=t("mrSG"),s=t("tk/3");const l=t("AytR").a.apiUrl;let u=(()=>{class e{constructor(e,n){this.http=e,this.router=n}ObtenerJson(){const e=localStorage.getItem("token")||void 0,n=new s.c({Authorization:"Bearer "+e});return this.http.get(`${l}/pqr`,{headers:n})}Eliminar(e){return Object(d.a)(this,void 0,void 0,(function*(){const n=localStorage.getItem("token")||void 0,t=new s.c({Authorization:"Bearer "+n});return new Promise((n,o)=>{this.http.delete(`${l}/pqr`+"/"+e,{headers:t}).toPromise()})}))}update(e,n){return Object(d.a)(this,void 0,void 0,(function*(){const t=localStorage.getItem("token")||void 0,o=new s.c({Authorization:"Bearer "+t});return new Promise((t,r)=>{this.http.put(`${l}/pqr`+"/"+n,e,{headers:o}).toPromise()})}))}}return e.\u0275fac=function(n){return new(n||e)(b.bc(s.a),b.bc(i.b))},e.\u0275prov=b.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=t("oOf3"),p=t("3Pt+");function h(e,n){if(1&e){const e=b.Yb();b.Xb(0,"tr"),b.Xb(1,"td"),b.uc(2),b.Xb(3,"div",17),b.Xb(4,"div",18),b.Xb(5,"div",19),b.Xb(6,"form",20,21),b.fc("ngSubmit",(function(){b.qc(e);const n=b.pc(7);return b.hc().guardar(n)})),b.Xb(8,"h5",22),b.uc(9),b.Wb(),b.Xb(10,"input",23,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.FechaPublicacion=t})),b.Wb(),b.Xb(12,"input",25,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.Id=t})),b.Wb(),b.Xb(14,"input",26,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.LastModification=t})),b.Wb(),b.Xb(16,"input",27,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.Pregunta=t})),b.Wb(),b.Xb(18,"label",28),b.uc(19," Ingrese la respuesta"),b.Wb(),b.Xb(20,"input",29,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.Respuesta=t})),b.Wb(),b.Xb(22,"p",30),b.uc(23),b.Wb(),b.Xb(24,"input",31,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.Token=t})),b.Wb(),b.Xb(26,"input",32,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.UEstadoPQR=t})),b.Wb(),b.Xb(28,"input",33,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.UEstadoPQR.Id=t})),b.Wb(),b.Xb(30,"input",34,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.UUsuario=t})),b.Wb(),b.Xb(32,"input",35,24),b.fc("ngModelChange",(function(t){return b.qc(e),n.$implicit.UUsuarioId=t})),b.Wb(),b.Xb(34,"p",30),b.uc(35),b.Wb(),b.Xb(36,"form",36),b.fc("submit",(function(){b.qc(e);const t=n.$implicit;return b.hc().eliminar(t.Id)})),b.Xb(37,"button",37),b.uc(38," Eliminar "),b.Wb(),b.Wb(),b.Xb(39,"button",38),b.uc(40," guardar "),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&e){const e=n.$implicit,t=n.index;b.Hb(2),b.wc("",t+1," "),b.Hb(7),b.wc(" Pregunta:",e.Pregunta,""),b.Hb(1),b.kc("ngModel",e.FechaPublicacion),b.Hb(2),b.kc("ngModel",e.Id),b.Hb(2),b.kc("ngModel",e.LastModification),b.Hb(2),b.kc("ngModel",e.Pregunta),b.Hb(4),b.kc("ngModel",e.Respuesta),b.Hb(3),b.wc("Respuesta : ",e.Respuesta,""),b.Hb(1),b.kc("ngModel",e.Token),b.Hb(2),b.kc("ngModel",e.UEstadoPQR),b.Hb(2),b.kc("ngModel",e.UEstadoPQR.Id),b.Hb(2),b.kc("ngModel",e.UUsuario),b.Hb(2),b.kc("ngModel",e.UUsuarioId),b.Hb(3),b.xc("Usuario : ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,"")}}const f=function(e){return{itemsPerPage:2,currentPage:e}};let m=(()=>{class e{constructor(e){this.servi=e,this.PageActual=1}ObtenerPqrs(){this.servi.ObtenerJson().subscribe(e=>{this.pqrs=e.results,console.log(this.pqrs),console.log("Informacion ya tiene resultado")},e=>{console.log(JSON.stringify(e))})}ngOnInit(){this.ObtenerPqrs()}eliminar(e){console.log(e),c.a.fire({title:"Estas seguro?",text:" No se podra recuperar la informacion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrar!"}).then(n=>{n.value&&(c.a.fire("Borrado!"," la informacion ha sido eliminada","success"),this.refrescar(e),this.ObtenerPqrs(),this.ngOnInit())})}refrescar(e){console.log(e),this.servi.Eliminar(e),this.ObtenerPqrs(),this.ngOnInit()}guardar({value:e}){console.log(e),console.log(e.Id),c.a.fire({title:"Esta seguro?",text:"Desea guardar los cambios?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, guardar!"}).then(n=>{n.value&&(c.a.fire("Guardado!","La respuesta ha sido enviada ","success"),e.UEstadoPQR.Nombre="atendida",console.log(e.UEstadoPQR.Nombre),console.log(e),this.servi.update(e,e.Id))})}}return e.\u0275fac=function(n){return new(n||e)(b.Sb(u))},e.\u0275cmp=b.Mb({type:e,selectors:[["app-listar"]],decls:40,vars:7,consts:[["id","main-header",1,"py-2","bg-info","text-white"],[1,"container"],[1,"row"],[1,"col-md-4"],["align","center"],[1,"display-4"],[1,"col-md-3"],["href","pqr/agregar","role","button",1,"btn","btn-info"],[1,"fas","fa-plus"],["id","eventos"],[1,"col-md-6"],[1,"card"],[1,"table-responsive"],[1,"table","table-bordered","table-striped",2,"background-color","white"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[3,"pageChange"],[1,"col","mb-4"],[1,"card",2,"width","25rem"],[1,"card-body"],[3,"ngSubmit"],["pqrForm","ngForm"],[1,"card-title"],["type","hidden","name","FechaPublicacion",1,"form-control",3,"ngModel","ngModelChange"],["respuesta","ngModel"],["type","hidden","name","Id",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","LastModification",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","Pregunta",1,"form-control",3,"ngModel","ngModelChange"],["for","nombre"],["type","text","name","Respuesta",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-text"],["type","hidden","name","Token",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","UEstadoPQR",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","UEstadoPQRId",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","UUsuario",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","UUsuarioId",1,"form-control",3,"ngModel","ngModelChange"],[3,"submit"],["type","submit",1,"btn","btn-danger","btn-block",2,"width","100"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","100"]],template:function(e,n){1&e&&(b.Xb(0,"header",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.Xb(3,"div",3),b.Xb(4,"h1"),b.uc(5," Inicio Pqrs "),b.Wb(),b.Wb(),b.Xb(6,"div",3),b.Xb(7,"div",1),b.Xb(8,"div",4),b.Xb(9,"h3"),b.uc(10,"Total de pqrs"),b.Wb(),b.Xb(11,"h4",5),b.uc(12),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(13,"div",6),b.Xb(14,"div",1),b.Xb(15,"div",4),b.Tb(16,"br"),b.Xb(17,"a",7),b.Xb(18,"h4"),b.Tb(19,"i",8),b.uc(20," Nuevo PQR"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Tb(21,"br"),b.Tb(22,"br"),b.Xb(23,"section",9),b.Xb(24,"div",1),b.Xb(25,"div",4),b.Xb(26,"div",10),b.Xb(27,"div",11),b.Xb(28,"h4"),b.uc(29,"listado de Pqrs"),b.Wb(),b.Wb(),b.Xb(30,"div",12),b.Xb(31,"table",13),b.Xb(32,"thead",14),b.Xb(33,"tr"),b.Xb(34,"th"),b.uc(35,"#"),b.Wb(),b.Wb(),b.Wb(),b.Xb(36,"tbody"),b.tc(37,h,41,15,"tr",15),b.ic(38,"paginate"),b.Wb(),b.Wb(),b.Xb(39,"pagination-controls",16),b.fc("pageChange",(function(e){return n.PageActual=e})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.Hb(12),b.wc(" ",null==n.pqrs?null:n.pqrs.length," "),b.Hb(25),b.kc("ngForOf",b.jc(38,2,n.pqrs,b.nc(5,f,n.PageActual))))},directives:[o.j,g.c,p.s,p.h,p.i,p.a,p.g,p.j],pipes:[g.b],styles:[""]}),e})();t.d(n,"ListarModule",(function(){return X}));let X=(()=>{class e{}return e.\u0275mod=b.Qb({type:e}),e.\u0275inj=b.Pb({factory:function(n){return new(n||e)},imports:[[o.b,p.e,g.a,r.a,i.d.forChild([{path:"",component:m}])]]}),e})()}}]);