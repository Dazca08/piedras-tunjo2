function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{HnS2:function(e,t,r){"use strict";r.r(t);var a,c,n=r("ofXK"),i=r("tyNb"),s=r("mrSG"),o=r("5RHE"),b=r("DaQG"),l=r.n(b),u=r("fXoL"),h=r("tk/3"),v=r("AytR"),f=r("JIr8"),d=r("LRne"),p=r("Ig2y"),k=v.a.apiUrl,g=((a=function(){function e(t,r,a){_classCallCheck(this,e),this.http=t,this.router=r,this.dateService=a}return _createClass(e,[{key:"prepareHeaders",value:function(){var e=localStorage.getItem("token")||void 0;return e?(this.headers=new h.c({Authorization:"Bearer "+e}),!0):(this.router.navigateByUrl("/login"),!1)}},{key:"getReservasTickets",value:function(){var e=this;return this.prepareHeaders()?new Promise((function(t){e.http.get("".concat(k,"/reserva-tickets"),{headers:e.headers}).pipe(Object(f.a)((function(e){return Object(d.a)({ok:!1})}))).subscribe((function(e){t(!0===e.ok?e.reservas:[])}))})):(console.log("Token not found"),Promise.resolve([]))}},{key:"getDataChart",value:function(e){var t=this,r=[],a=this.dateService.meses,c=(new Date).getFullYear();return a.forEach((function(a,n){r.push(t.getTicketsByMonth(e,n+1,c))})),console.log(r),r}},{key:"getTicketsByMonth",value:function(e,t,r){var a=[];return e.forEach((function(e){var c=e.FechaIngreso.toString().split("T")[0],n=Number(c.split("-")[0]),i=Number(c.split("-")[1]);n===r&&i===t&&a.push(e)})),a.length}}]),e}()).\u0275fac=function(e){return new(e||a)(u.ec(h.a),u.ec(i.b),u.ec(p.a))},a.\u0275prov=u.Rb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),C=r("3Pt+"),m=r("LPYB"),y=((c=function(){function e(t){_classCallCheck(this,e),this.reservaTickService=t,this.typeChart="line",this.barChartOptions={responsive:!0,scales:{xAxes:[{}],yAxes:[{}]},plugins:{datalabels:{anchor:"end",align:"end"}}},this.barChartLabels=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre",""],this.barChartType="line",this.barChartLegend=!0,this.barChartData=[{data:[65,59,80,81,56,55,40,50,40,40,60,40,0],label:"Meses"}]}return _createClass(e,[{key:"ngOnInit",value:function(){this.prepareData()}},{key:"prepareData",value:function(){var e=this.reservaTickService.getDataChart(this.reservas);this.barChartData[0].data=e}},{key:"chartClicked",value:function(e){var t=e.event,r=e.active;console.log(t,r)}},{key:"chartHovered",value:function(e){var t=e.event,r=e.active;console.log(t,r)}}]),e}()).\u0275fac=function(e){return new(e||c)(u.Vb(g))},c.\u0275cmp=u.Pb({type:c,selectors:[["app-chart-reservas-tickets"]],inputs:{reservas:"reservas"},decls:9,vars:7,consts:[[1,"container","text-center"],["role","group",1,"btn-group"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"fas","fa-chart-area"],[1,"fas","fa-chart-bar"],[1,"row","justify-content-center","mt-5"],[1,"col-md-10"],["baseChart","",3,"datasets","labels","options","legend","chartType"]],template:function(e,t){1&e&&(u.ac(0,"div",0),u.ac(1,"div",1),u.ac(2,"button",2),u.ic("click",(function(){return t.typeChart="line"})),u.Wb(3,"i",3),u.Zb(),u.ac(4,"button",2),u.ic("click",(function(){return t.typeChart="bar"})),u.Wb(5,"i",4),u.Zb(),u.Zb(),u.Zb(),u.ac(6,"div",5),u.ac(7,"div",6),u.Wb(8,"canvas",7),u.Zb(),u.Zb()),2&e&&(u.Jb(2),u.rc("ngClass","line"===t.typeChart?"btn-primary":"btn-outline-primary"),u.Jb(2),u.rc("ngClass","bar"===t.typeChart?"btn-primary":"btn-outline-primary"),u.Jb(4),u.rc("datasets",t.barChartData)("labels",t.barChartLabels)("options",t.barChartOptions)("legend",t.barChartLegend)("chartType",t.typeChart))},directives:[n.k,m.a],styles:[""]}),c),Z=r("mEn6");function T(e,t){if(1&e&&(u.ac(0,"option",20),u.Cc(1),u.Zb()),2&e){var r=t.index,a=u.kc(2);u.rc("value",(r+1).toString()),u.Jb(1),u.Dc(a.months[r])}}function J(e,t){1&e&&(u.ac(0,"tr",21),u.ac(1,"td",22),u.Cc(2,"No hay reservas para mostrar en el mes seleccionado"),u.Zb(),u.Zb())}function w(e,t){if(1&e&&(u.ac(0,"tr"),u.ac(1,"td"),u.Cc(2),u.lc(3,"date"),u.Zb(),u.ac(4,"td"),u.Cc(5),u.Zb(),u.ac(6,"td"),u.Cc(7),u.lc(8,"currency"),u.Zb(),u.ac(9,"td"),u.Cc(10),u.Zb(),u.ac(11,"td"),u.Cc(12),u.Zb(),u.ac(13,"td"),u.Cc(14),u.Zb(),u.Zb()),2&e){var r=t.$implicit;u.Jb(2),u.Dc(u.nc(3,6,r.FechaIngreso,"dd MMM yyyy")),u.Jb(3),u.Dc(r.Cantidad),u.Jb(2),u.Dc(u.nc(8,9,r.Precio,"COP ")),u.Jb(3),u.Dc(r.UUsuarioId),u.Jb(2),u.Dc(r.NumeroDocumento),u.Jb(2),u.Dc(r.idTicket)}}function M(e,t){if(1&e){var r=u.bc();u.ac(0,"div",9),u.ac(1,"div",10),u.ac(2,"div",11),u.ac(3,"b",12),u.Cc(4,"Filtrar por mes "),u.Zb(),u.ac(5,"select",13),u.ic("ngModelChange",(function(e){return u.yc(r),u.kc().selectedMonth=e})),u.Bc(6,T,2,2,"option",14),u.Zb(),u.Zb(),u.Zb(),u.ac(7,"div",15),u.ac(8,"table",16),u.ac(9,"thead",17),u.ac(10,"tr"),u.ac(11,"th"),u.Cc(12,"Fecha Reserva"),u.Zb(),u.ac(13,"th"),u.Cc(14,"Cantidad"),u.Zb(),u.ac(15,"th"),u.Cc(16,"Precio"),u.Zb(),u.ac(17,"th"),u.Cc(18,"Usuario"),u.Zb(),u.ac(19,"th"),u.Cc(20,"N\xfamero Documento"),u.Zb(),u.ac(21,"th"),u.Cc(22,"Ticket Tipo"),u.Zb(),u.Zb(),u.Zb(),u.ac(23,"tbody"),u.Bc(24,J,3,0,"tr",18),u.lc(25,"reservasMes"),u.Bc(26,w,15,12,"tr",19),u.lc(27,"reservasMes"),u.Zb(),u.Zb(),u.Zb(),u.Zb()}if(2&e){var a=u.kc();u.Jb(5),u.rc("ngModel",a.selectedMonth),u.Jb(1),u.rc("ngForOf",a.months),u.Jb(18),u.rc("ngIf",0===u.oc(25,4,a.reservasTick,a.selectedMonth,"ticket").length),u.Jb(2),u.rc("ngForOf",u.oc(27,8,a.reservasTick,a.selectedMonth,"ticket"))}}function D(e,t){if(1&e&&(u.ac(0,"div",0),u.Wb(1,"app-chart-reservas-tickets",23),u.Zb()),2&e){var r=u.kc();u.Jb(1),u.rc("reservas",r.reservasTick)}}var R,S=((R=function(){function e(t){_classCallCheck(this,e),this.reservasTickService=t,this.verGrafica=!1,this.selectedMonth=((new Date).getMonth()+1).toString(),this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}return _createClass(e,[{key:"ngOnInit",value:function(){this.prepare()}},{key:"prepare",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reservasTickService.getReservasTickets();case 2:this.reservasTick=e.sent,console.log(this.reservasTick);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"generarPdft",value:function(){var e=new o;e.text(85,10,"Reporte Tickets"),l()(e,{html:"#tablat"}),e.save("Reporte_Tickets.pdf")}}]),e}()).\u0275fac=function(e){return new(e||R)(u.Vb(g))},R.\u0275cmp=u.Pb({type:R,selectors:[["app-tickets"]],decls:15,vars:3,consts:[[1,"container"],[1,"float-left"],["routerLink","/reportes",1,"btn","btn-sm","btn-light","shadow"],[1,"fas","fa-arrow-left"],[1,"text-muted","text-center","d-block"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"float-right"],["class"," table-responsive",4,"ngIf"],["class","container",4,"ngIf"],[1,"table-responsive"],[1,"row","justify-content-end","mb-2"],[1,"col-md-3","col-sm-4","col-xs-6"],[1,"text-muted"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","ticketreporte",1,"table-responsive-sm"],["id","tablat",1,"table","table-sm","table-bordered"],[1,"thead-dark"],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"],["colspan","6"],[3,"reservas"]],template:function(e,t){1&e&&(u.ac(0,"div",0),u.ac(1,"div",1),u.ac(2,"button",2),u.Wb(3,"i",3),u.Zb(),u.Zb(),u.ac(4,"b",4),u.Cc(5,"REPORTES RESERVAS TICKETS"),u.Zb(),u.Zb(),u.Wb(6,"hr"),u.ac(7,"div",1),u.ac(8,"button",5),u.ic("click",(function(){return t.verGrafica=!t.verGrafica})),u.Cc(9),u.Zb(),u.Zb(),u.ac(10,"div",6),u.ac(11,"button",5),u.ic("click",(function(){return t.generarPdft()})),u.Cc(12," Generar Reporte "),u.Zb(),u.Zb(),u.Bc(13,M,28,12,"div",7),u.Bc(14,D,2,1,"div",8)),2&e&&(u.Jb(9),u.Ec(" ",t.verGrafica?"VER TABLA":"VER GR\xc1FICA"," "),u.Jb(4),u.rc("ngIf",t.reservasTick&&!t.verGrafica),u.Jb(1),u.rc("ngIf",t.reservasTick&&t.verGrafica))},directives:[i.c,n.m,C.o,C.g,C.j,n.l,C.k,C.q,y],pipes:[Z.a,n.e,n.c],styles:[""]}),R),I=r("j1ZV"),O=r("iTUp");r.d(t,"TicketsModule",(function(){return E}));var P,E=((P=function e(){_classCallCheck(this,e)}).\u0275mod=u.Tb({type:P}),P.\u0275inj=u.Sb({factory:function(e){return new(e||P)},imports:[[n.b,I.a,O.a,C.e,i.e.forChild([{path:"",component:S}])]]}),P)}}]);