(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{rnD0:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),c=n("iTUp"),a=n("tyNb"),o=n("PSD3"),r=n.n(o),s=n("fXoL"),d=n("mrSG"),u=n("tk/3");const l=n("AytR").a.apiUrl;let b=(()=>{class e{constructor(e,t){this.http=e,this.router=t}prepareHeaders(){const e=localStorage.getItem("token")||void 0;return e?(this.headers=new u.c({Authorization:"Bearer "+e}),!0):(this.router.navigateByUrl("/login"),!1)}ObtenerJson(){return this.prepareHeaders()||console.log("Token not found"),this.http.get(`${l}/pqr`,{headers:this.headers})}Eliminar(e){return Object(d.a)(this,void 0,void 0,(function*(){const t=localStorage.getItem("token")||void 0,n=new u.c({Authorization:"Bearer "+t});return new Promise((t,i)=>{this.http.delete(`${l}/pqr`+"/"+e,{headers:n}).toPromise()})}))}update(e,t){return Object(d.a)(this,void 0,void 0,(function*(){const n=localStorage.getItem("token")||void 0,i=new u.c({Authorization:"Bearer "+n});return new Promise((n,c)=>{this.http.put(`${l}/pqr`+"/responder/"+t,e,{headers:i}).toPromise()})}))}}return e.\u0275fac=function(t){return new(t||e)(s.ec(u.a),s.ec(a.b))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=n("3Pt+"),p=n("oOf3");let g=(()=>{class e{transform(e,t){if(""===t||t.length<3)return e;const n=[];for(const i of e)i.Pregunta.toLowerCase().indexOf(t.toLowerCase())>-1&&n.push(i);return console.log(n),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Ub({name:"filtropqrs",type:e,pure:!0}),e})();function f(e,t){1&e&&(s.ac(0,"div"),s.Wb(1,"hr"),s.ac(2,"div"),s.ac(3,"h6"),s.Cc(4,"Lo sentimos en este momento no existen pqrs sin responder"),s.Zb(),s.Zb(),s.Zb())}function m(e,t){1&e&&(s.ac(0,"div"),s.Wb(1,"hr"),s.ac(2,"div"),s.ac(3,"h6"),s.Cc(4,"Lo sentimos en este momento no existen pqrs respondidos"),s.Zb(),s.Zb(),s.Zb())}function M(e,t){if(1&e){const e=s.bc();s.ac(0,"div",18),s.ac(1,"div",19),s.ac(2,"div",20),s.ac(3,"h5"),s.Wb(4,"i",21),s.Cc(5),s.Zb(),s.Zb(),s.ac(6,"div",22),s.ac(7,"form",23,24),s.ic("ngSubmit",(function(){s.yc(e);const t=s.xc(8);return s.kc(2).guardar(t)})),s.ac(9,"p",25),s.Cc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Zb(),s.ac(11,"p",25),s.Wb(12,"i",26),s.Cc(13),s.Zb(),s.ac(14,"p",25),s.Wb(15,"i",27),s.Cc(16),s.Zb(),s.ac(17,"input",28,29),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.FechaPublicacion=n})),s.Zb(),s.ac(19,"input",30,31),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.FechaRespuesta=n})),s.Zb(),s.ac(21,"input",32,33),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Id=n})),s.Zb(),s.ac(23,"input",34,35),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.LastModification=n})),s.Zb(),s.ac(25,"input",36,37),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Pregunta=n})),s.Zb(),s.ac(27,"p",25),s.Wb(28,"i",38),s.Cc(29," Ingrese la respuesta "),s.Zb(),s.ac(30,"textarea",39),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Respuesta=n})),s.Zb(),s.Wb(31,"br"),s.ac(32,"input",40,41),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Respuesta=n})),s.Zb(),s.ac(34,"input",42,43),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Token=n})),s.Zb(),s.ac(36,"input",44,45),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UEstadoPQR=n})),s.Zb(),s.ac(38,"input",46,47),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UEstadoPQRId=n})),s.Zb(),s.ac(40,"input",48,49),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UUsuario=n})),s.Zb(),s.ac(42,"input",50,51),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UUsuarioId=n})),s.Zb(),s.Wb(44,"br"),s.Wb(45,"br"),s.Wb(46,"br"),s.Wb(47,"hr"),s.ac(48,"div",6),s.ac(49,"button",52),s.Wb(50,"i",53),s.Cc(51," Enviar respuesta "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=t.$implicit;s.Jb(5),s.Ec(" Asunto: ",e.Pregunta,""),s.Jb(8),s.Fc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Jb(3),s.Ec(" fecha de la peticion : ",e.FechaPublicacion," "),s.Jb(1),s.rc("ngModel",e.FechaPublicacion),s.Jb(2),s.rc("ngModel",e.FechaRespuesta),s.Jb(2),s.rc("ngModel",e.Id),s.Jb(2),s.rc("ngModel",e.LastModification),s.Jb(2),s.rc("ngModel",e.Pregunta),s.Jb(5),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Token),s.Jb(2),s.rc("ngModel",e.UEstadoPQR),s.Jb(2),s.rc("ngModel",e.UEstadoPQRId),s.Jb(2),s.rc("ngModel",e.UUsuario),s.Jb(2),s.rc("ngModel",e.UUsuarioId)}}const Z=function(e){return{itemsPerPage:3,currentPage:e}};function C(e,t){if(1&e){const e=s.bc();s.ac(0,"div"),s.ac(1,"section",12),s.ac(2,"div",5),s.Wb(3,"hr"),s.ac(4,"div",13),s.ac(5,"div",14),s.Bc(6,M,52,16,"div",15),s.lc(7,"paginate"),s.lc(8,"filtropqrs"),s.Zb(),s.ac(9,"div",16),s.ac(10,"pagination-controls",17),s.ic("pageChange",(function(t){return s.yc(e),s.kc().PageActual=t})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=s.kc();s.Jb(6),s.rc("ngForOf",s.nc(7,1,s.nc(8,4,e.pqrs,e.filterpregunta),s.uc(7,Z,e.PageActual)))}}function v(e,t){if(1&e){const e=s.bc();s.ac(0,"div",18),s.ac(1,"div",19),s.ac(2,"div",20),s.ac(3,"h5"),s.Wb(4,"i",21),s.Cc(5),s.Zb(),s.Zb(),s.ac(6,"div",22),s.ac(7,"form",23,24),s.ic("ngSubmit",(function(){s.yc(e);const t=s.xc(8);return s.kc(2).guardar(t)})),s.ac(9,"p",25),s.Cc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Zb(),s.ac(11,"p",25),s.Wb(12,"i",26),s.Cc(13),s.Zb(),s.ac(14,"p",25),s.Wb(15,"i",27),s.Cc(16),s.Zb(),s.ac(17,"input",28,29),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.FechaPublicacion=n})),s.Zb(),s.ac(19,"p",25),s.Wb(20,"i",27),s.Cc(21),s.Zb(),s.ac(22,"input",30,31),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.FechaRespuesta=n})),s.Zb(),s.ac(24,"input",32,33),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Id=n})),s.Zb(),s.ac(26,"input",34,35),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.LastModification=n})),s.Zb(),s.ac(28,"input",36,37),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Pregunta=n})),s.Zb(),s.ac(30,"p",25),s.Wb(31,"i",38),s.Cc(32," Ingrese la respuesta "),s.Zb(),s.ac(33,"textarea",39),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Respuesta=n})),s.Cc(34,"Escribe aqu\xed tus comentarios"),s.Zb(),s.Wb(35,"br"),s.ac(36,"input",40,41),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Respuesta=n})),s.Zb(),s.ac(38,"input",42,43),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.Token=n})),s.Zb(),s.ac(40,"input",44,45),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UEstadoPQR=n})),s.Zb(),s.ac(42,"input",46,47),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UEstadoPQRId=n})),s.Zb(),s.ac(44,"input",48,49),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UUsuario=n})),s.Zb(),s.ac(46,"input",50,51),s.ic("ngModelChange",(function(n){return s.yc(e),t.$implicit.UUsuarioId=n})),s.Zb(),s.Wb(48,"br"),s.Wb(49,"br"),s.Wb(50,"br"),s.Wb(51,"hr"),s.ac(52,"div",0),s.ac(53,"div",54),s.ac(54,"div",6),s.ac(55,"form",8),s.ic("submit",(function(){s.yc(e);const n=t.$implicit;return s.kc(2).eliminar(n.Id)})),s.ac(56,"button",55),s.Wb(57,"i",56),s.Cc(58," Eliminar "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(59,"div",54),s.ac(60,"div",6),s.ac(61,"button",57),s.Wb(62,"i",53),s.Cc(63," Enviar "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=t.$implicit;s.Jb(5),s.Ec(" Asunto: ",e.Pregunta,""),s.Jb(8),s.Fc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Jb(3),s.Ec(" fecha de la peticion : ",e.FechaPublicacion," "),s.Jb(1),s.rc("ngModel",e.FechaPublicacion),s.Jb(4),s.Ec(" fecha de la Respuesta : ",e.FechaRespuesta," "),s.Jb(1),s.rc("ngModel",e.FechaRespuesta),s.Jb(2),s.rc("ngModel",e.Id),s.Jb(2),s.rc("ngModel",e.LastModification),s.Jb(2),s.rc("ngModel",e.Pregunta),s.Jb(5),s.rc("ngModel",e.Respuesta),s.Jb(3),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Token),s.Jb(2),s.rc("ngModel",e.UEstadoPQR),s.Jb(2),s.rc("ngModel",e.UEstadoPQRId),s.Jb(2),s.rc("ngModel",e.UUsuario),s.Jb(2),s.rc("ngModel",e.UUsuarioId)}}function P(e,t){if(1&e){const e=s.bc();s.ac(0,"div"),s.ac(1,"section",12),s.ac(2,"div",5),s.Wb(3,"hr"),s.ac(4,"div",13),s.ac(5,"div",14),s.Bc(6,v,64,17,"div",15),s.lc(7,"paginate"),s.lc(8,"filtropqrs"),s.Zb(),s.ac(9,"div",16),s.ac(10,"pagination-controls",17),s.ic("pageChange",(function(t){return s.yc(e),s.kc().PageActual=t})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=s.kc();s.Jb(6),s.rc("ngForOf",s.nc(7,1,s.nc(8,4,e.pqrs,e.filterpregunta),s.uc(7,Z,e.PageActual)))}}let y=(()=>{class e{constructor(e,t){this.servi=e,this.route=t,this.PageActual=1,this.i=0,this.fechatemp="",this.fechartemp="",this.filterpregunta="",this.indicador=!0,this.indicadorBoton="PQR Contestados"}ObtenerPqrs(){console.log(this.indicador),1==this.indicador?this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),n=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=n[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""==e.Respuesta),console.log(this.pqrs),console.log("Informacion ya tiene resultado")},e=>{console.log(JSON.stringify(e))}):0==this.indicador&&this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),n=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=n[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""!=e.Respuesta)},e=>{console.log(JSON.stringify(e))})}listarContestados(){1==this.indicador?(this.indicador=!1,this.indicadorBoton="PQR Sin contestar"):0==this.indicador&&(this.indicador=!0,this.indicadorBoton="PQR Contestados"),this.refrescar()}ngOnInit(){this.ObtenerPqrs()}eliminar(e){r.a.fire({title:"Estas seguro?",text:" No se podra recuperar la informacion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrar!"}).then(t=>{t.value&&(r.a.fire("Borrado!"," la informacion ha sido eliminada","success"),this.servi.Eliminar(e),this.refrescar())})}refrescar(){this.ObtenerPqrs(),this.ObtenerPqrs(),this.ngOnInit()}guardar({value:e}){console.log(e),""==e.Respuesta?r.a.fire("Por favor Ingrese una respuesta!","Respuesta no  enviada!","error"):e.Respuesta.length<10?r.a.fire("La respuesta debe tener como minimo 10 caracteres!","Respuesta no  enviada!","error"):r.a.fire({title:"Esta seguro?",text:"Desea enviar esta respuesta?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, guardar!"}).then(t=>{t.value&&(r.a.fire("Guardado!","La respuesta ha sido enviada ","success"),e.UEstadoPQRId=2,e.UEstadoPQR.Id=2,e.UEstadoPQR.Nombre="Resuelto",console.log(e),this.servi.update(e,e.Id),this.refrescar())})}}return e.\u0275fac=function(t){return new(t||e)(s.Vb(b),s.Vb(a.b))},e.\u0275cmp=s.Pb({type:e,selectors:[["app-listar"]],decls:22,vars:7,consts:[[1,"row"],[1,"col-md-4"],["align","right"],[1,"form-group"],["type","text","name","filterpregunta","placeholder","Buscar pqrs por Asunto ...",1,"form-control",2,"width","325",3,"ngModel","ngModelChange"],[1,"container"],["align","center"],[1,"fas","fa-list-ol"],[3,"submit"],["type","submit",1,"btn","btn-success"],[1,"fas","fa-list"],[4,"ngIf"],["id","pqrs"],[1,"col-md-12"],[1,"row","row-cols-1","row-cols-md-3"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"text-center"],[3,"pageChange"],[1,"col","mb-4"],[1,"card","h-100"],[1,"card-header"],[1,"fa","fa-question-circle"],[1,"car-body","container"],[3,"ngSubmit"],["pqrForm","ngForm"],[1,"card-text"],[1,"fa","fa-user"],[1,"fa","fa-calendar"],["type","hidden","name","FechaPublicacion",1,"form-control",3,"ngModel","ngModelChange"],["FechaPublicacion","ngModel"],["type","hidden","name","FechaRespuesta",1,"form-control",3,"ngModel","ngModelChange"],["FechaRespuesta","ngModel"],["type","hidden","name","Id",1,"form-control",3,"ngModel","ngModelChange"],["Id","ngModel"],["type","hidden","name","LastModification",1,"form-control",3,"ngModel","ngModelChange"],["LastModification","ngModel"],["type","hidden","name","Pregunta",1,"form-control",3,"ngModel","ngModelChange"],["Pregunta","ngModel"],[1,"fa","fa-pencil-alt"],["name","comentarios","rows","4","cols","38",1,"textinput",3,"ngModel","ngModelChange"],["type","hidden","name","Respuesta",1,"form-control",3,"ngModel","ngModelChange"],["Respuesta","ngModel"],["type","hidden","name","Token",1,"form-control",3,"ngModel","ngModelChange"],["Token","ngModel"],["type","hidden","name","UEstadoPQR",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQR","ngModel"],["type","hidden","name","UEstadoPQRId",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQRId","ngModel"],["type","hidden","name","UUsuario",1,"form-control",3,"ngModel","ngModelChange"],["UUsuario","ngModel"],["type","hidden","name","UUsuarioId",1,"form-control",3,"ngModel","ngModelChange"],["UUsuarioId","ngModel"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","200"],[1,"fas","fa-share-square"],[1,"col-md-6"],["type","submit",1,"btn","btn-danger","btn-block",2,"width","130"],[1,"fas","fa-trash"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","130"]],template:function(e,t){1&e&&(s.ac(0,"div",0),s.ac(1,"div",1),s.ac(2,"div",2),s.ac(3,"div",3),s.ac(4,"input",4),s.ic("ngModelChange",(function(e){return t.filterpregunta=e})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(5,"div",1),s.ac(6,"div",5),s.ac(7,"div",6),s.ac(8,"h5"),s.Wb(9,"i",7),s.Cc(10),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(11,"div",1),s.ac(12,"div",6),s.ac(13,"form",8),s.ic("submit",(function(){return t.listarContestados()})),s.ac(14,"button",9),s.ac(15,"h6"),s.Wb(16,"i",10),s.Cc(17),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Bc(18,f,5,0,"div",11),s.Bc(19,m,5,0,"div",11),s.Bc(20,C,11,9,"div",11),s.Bc(21,P,11,9,"div",11)),2&e&&(s.Jb(4),s.rc("ngModel",t.filterpregunta),s.Jb(6),s.Ec(" Total de pqrs : ",null==t.pqrs?null:t.pqrs.length,""),s.Jb(7),s.Ec(" ",t.indicadorBoton,""),s.Jb(1),s.rc("ngIf",0==t.pqrs.length&&"PQR Contestados"==t.indicadorBoton),s.Jb(1),s.rc("ngIf",0==t.pqrs.length&&"PQR Sin contestar"==t.indicadorBoton),s.Jb(1),s.rc("ngIf",1==t.indicador),s.Jb(1),s.rc("ngIf",0==t.indicador))},directives:[h.a,h.g,h.j,h.r,h.h,h.i,i.m,i.l,p.c],pipes:[p.b,g],styles:[".textinput[_ngcontent-%COMP%]{float:left;width:100%;min-height:75px;outline:none;resize:none;border:1px solid grey}"]}),e})();n.d(t,"ListarModule",(function(){return U}));let U=(()=>{class e{}return e.\u0275mod=s.Tb({type:e}),e.\u0275inj=s.Sb({factory:function(t){return new(t||e)},imports:[[i.b,h.e,p.a,c.a,a.e.forChild([{path:"",component:y}])]]}),e})()}}]);