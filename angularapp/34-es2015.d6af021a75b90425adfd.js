(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{rnD0:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),c=i("iTUp"),a=i("tyNb"),o=i("PSD3"),r=i.n(o),s=i("fXoL"),d=i("mrSG"),u=i("tk/3");const l=i("AytR").a.apiUrl;let b=(()=>{class e{constructor(e,t){this.http=e,this.router=t}prepareHeaders(){const e=localStorage.getItem("token")||void 0;return e?(this.headers=new u.c({Authorization:"Bearer "+e}),!0):(this.router.navigateByUrl("/login"),!1)}ObtenerJson(){return this.prepareHeaders()||console.log("Token not found"),this.http.get(`${l}/pqr`,{headers:this.headers})}Eliminar(e){return Object(d.a)(this,void 0,void 0,(function*(){const t=localStorage.getItem("token")||void 0,i=new u.c({Authorization:"Bearer "+t});return new Promise((t,n)=>{this.http.delete(`${l}/pqr`+"/"+e,{headers:i}).toPromise()})}))}update(e,t){return Object(d.a)(this,void 0,void 0,(function*(){const i=localStorage.getItem("token")||void 0,n=new u.c({Authorization:"Bearer "+i});return new Promise((i,c)=>{this.http.put(`${l}/pqr`+"/responder/"+t,e,{headers:n}).toPromise()})}))}}return e.\u0275fac=function(t){return new(t||e)(s.ec(u.a),s.ec(a.b))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("3Pt+"),p=i("oOf3");let g=(()=>{class e{transform(e,t){if(""===t||t.length<3)return e;const i=[];for(const n of e)n.Pregunta.toLowerCase().indexOf(t.toLowerCase())>-1&&i.push(n);return console.log(i),i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Ub({name:"filtropqrs",type:e,pure:!0}),e})();function f(e,t){1&e&&(s.ac(0,"div"),s.Wb(1,"hr"),s.ac(2,"div"),s.ac(3,"h6"),s.Dc(4,"Lo sentimos en este momento no existen pqrs sin responder"),s.Zb(),s.Zb(),s.Zb())}function m(e,t){1&e&&(s.ac(0,"div"),s.Wb(1,"hr"),s.ac(2,"div"),s.ac(3,"h6"),s.Dc(4,"Lo sentimos en este momento no existen pqrs respondidos"),s.Zb(),s.Zb(),s.Zb())}function M(e,t){if(1&e){const e=s.bc();s.ac(0,"div",20),s.ac(1,"div",21),s.ac(2,"div",22),s.ac(3,"h5"),s.Wb(4,"i",23),s.Dc(5),s.Zb(),s.Zb(),s.ac(6,"div",24),s.ac(7,"form",25,26),s.ic("ngSubmit",(function(){s.yc(e);const t=s.xc(8);return s.kc(2).guardar(t)})),s.ac(9,"p",27),s.Dc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Zb(),s.ac(11,"p",27),s.Wb(12,"i",28),s.Dc(13),s.Zb(),s.ac(14,"p",27),s.Wb(15,"i",29),s.Dc(16),s.Zb(),s.ac(17,"input",30,31),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.FechaPublicacion=i})),s.Zb(),s.ac(19,"input",32,33),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.FechaRespuesta=i})),s.Zb(),s.ac(21,"input",34,35),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Id=i})),s.Zb(),s.ac(23,"input",36,37),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.LastModification=i})),s.Zb(),s.ac(25,"input",38,39),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Pregunta=i})),s.Zb(),s.ac(27,"p",27),s.Wb(28,"i",40),s.Dc(29," Ingrese la respuesta "),s.Zb(),s.ac(30,"textarea",41),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Respuesta=i})),s.Zb(),s.Wb(31,"br"),s.ac(32,"input",42,43),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Respuesta=i})),s.Zb(),s.ac(34,"input",44,45),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Token=i})),s.Zb(),s.ac(36,"input",46,47),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UEstadoPQR=i})),s.Zb(),s.ac(38,"input",48,49),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UEstadoPQRId=i})),s.Zb(),s.ac(40,"input",50,51),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UUsuario=i})),s.Zb(),s.ac(42,"input",52,53),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UUsuarioId=i})),s.Zb(),s.Wb(44,"br"),s.ac(45,"div",4),s.ac(46,"button",54),s.Wb(47,"i",55),s.Dc(48," Enviar respuesta "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=t.$implicit;s.Jb(5),s.Fc(" Asunto: ",e.Pregunta,""),s.Jb(8),s.Gc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Jb(3),s.Fc(" fecha de la peticion : ",e.FechaPublicacion," "),s.Jb(1),s.rc("ngModel",e.FechaPublicacion),s.Jb(2),s.rc("ngModel",e.FechaRespuesta),s.Jb(2),s.rc("ngModel",e.Id),s.Jb(2),s.rc("ngModel",e.LastModification),s.Jb(2),s.rc("ngModel",e.Pregunta),s.Jb(5),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Token),s.Jb(2),s.rc("ngModel",e.UEstadoPQR),s.Jb(2),s.rc("ngModel",e.UEstadoPQRId),s.Jb(2),s.rc("ngModel",e.UUsuario),s.Jb(2),s.rc("ngModel",e.UUsuarioId)}}const Z=function(e){return{itemsPerPage:3,currentPage:e}};function v(e,t){if(1&e){const e=s.bc();s.ac(0,"div"),s.ac(1,"section",14),s.ac(2,"div",1),s.ac(3,"div",15),s.ac(4,"div",16),s.Bc(5,M,49,16,"div",17),s.lc(6,"paginate"),s.lc(7,"filtropqrs"),s.Zb(),s.ac(8,"div",18),s.ac(9,"pagination-controls",19),s.ic("pageChange",(function(t){return s.yc(e),s.kc().PageActual=t})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=s.kc();s.Jb(5),s.rc("ngForOf",s.nc(6,1,s.nc(7,4,e.pqrs,e.filterpregunta),s.uc(7,Z,e.PageActual)))}}function y(e,t){if(1&e){const e=s.bc();s.ac(0,"div",20),s.ac(1,"div",21),s.ac(2,"div",22),s.ac(3,"h5"),s.Wb(4,"i",23),s.Dc(5),s.Zb(),s.Zb(),s.ac(6,"div",24),s.ac(7,"form",25,26),s.ic("ngSubmit",(function(){s.yc(e);const t=s.xc(8);return s.kc(2).guardar(t)})),s.ac(9,"p",27),s.Dc(10," Usuario que hace la pregunta , queja , reclamo o sugerencia : "),s.Zb(),s.ac(11,"p",27),s.Wb(12,"i",28),s.Dc(13),s.Zb(),s.ac(14,"p",27),s.Wb(15,"i",29),s.Dc(16),s.Zb(),s.ac(17,"input",30,31),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.FechaPublicacion=i})),s.Zb(),s.ac(19,"p",27),s.Wb(20,"i",29),s.Dc(21),s.Zb(),s.ac(22,"input",32,33),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.FechaRespuesta=i})),s.Zb(),s.ac(24,"input",34,35),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Id=i})),s.Zb(),s.ac(26,"input",36,37),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.LastModification=i})),s.Zb(),s.ac(28,"input",38,39),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Pregunta=i})),s.Zb(),s.ac(30,"p",27),s.Wb(31,"i",40),s.Dc(32," Ingrese la respuesta "),s.Zb(),s.ac(33,"textarea",41),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Respuesta=i})),s.Dc(34,"Escribe aqu\xed tus comentarios"),s.Zb(),s.Wb(35,"br"),s.ac(36,"input",42,43),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Respuesta=i})),s.Zb(),s.ac(38,"input",44,45),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.Token=i})),s.Zb(),s.ac(40,"input",46,47),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UEstadoPQR=i})),s.Zb(),s.ac(42,"input",48,49),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UEstadoPQRId=i})),s.Zb(),s.ac(44,"input",50,51),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UUsuario=i})),s.Zb(),s.ac(46,"input",52,53),s.ic("ngModelChange",(function(i){return s.yc(e),t.$implicit.UUsuarioId=i})),s.Zb(),s.Wb(48,"br"),s.ac(49,"div",2),s.ac(50,"div",56),s.ac(51,"div",4),s.ac(52,"form",10),s.ic("submit",(function(){s.yc(e);const i=t.$implicit;return s.kc(2).eliminar(i.Id)})),s.ac(53,"button",57),s.Wb(54,"i",58),s.Dc(55," Eliminar "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(56,"div",56),s.ac(57,"div",4),s.ac(58,"button",59),s.Wb(59,"i",55),s.Dc(60," Enviar "),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=t.$implicit;s.Jb(5),s.Fc(" Asunto: ",e.Pregunta,""),s.Jb(8),s.Gc(" ",e.UUsuario.Nombre," ",e.UUsuario.Apellido,""),s.Jb(3),s.Fc(" fecha de la peticion : ",e.FechaPublicacion," "),s.Jb(1),s.rc("ngModel",e.FechaPublicacion),s.Jb(4),s.Fc(" fecha de la Respuesta : ",e.FechaRespuesta," "),s.Jb(1),s.rc("ngModel",e.FechaRespuesta),s.Jb(2),s.rc("ngModel",e.Id),s.Jb(2),s.rc("ngModel",e.LastModification),s.Jb(2),s.rc("ngModel",e.Pregunta),s.Jb(5),s.rc("ngModel",e.Respuesta),s.Jb(3),s.rc("ngModel",e.Respuesta),s.Jb(2),s.rc("ngModel",e.Token),s.Jb(2),s.rc("ngModel",e.UEstadoPQR),s.Jb(2),s.rc("ngModel",e.UEstadoPQRId),s.Jb(2),s.rc("ngModel",e.UUsuario),s.Jb(2),s.rc("ngModel",e.UUsuarioId)}}function P(e,t){if(1&e){const e=s.bc();s.ac(0,"div"),s.ac(1,"section",14),s.ac(2,"div",1),s.ac(3,"div",15),s.ac(4,"div",16),s.Bc(5,y,61,17,"div",17),s.lc(6,"paginate"),s.lc(7,"filtropqrs"),s.Zb(),s.ac(8,"div",18),s.ac(9,"pagination-controls",19),s.ic("pageChange",(function(t){return s.yc(e),s.kc().PageActual=t})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){const e=s.kc();s.Jb(5),s.rc("ngForOf",s.nc(6,1,s.nc(7,4,e.pqrs,e.filterpregunta),s.uc(7,Z,e.PageActual)))}}let C=(()=>{class e{constructor(e,t){this.servi=e,this.route=t,this.PageActual=1,this.i=0,this.fechatemp="",this.fechartemp="",this.filterpregunta="",this.indicador=!0,this.indicadorBoton="PQR Contestados"}ObtenerPqrs(){console.log(this.indicador),1==this.indicador?this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),i=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=i[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""==e.Respuesta),console.log(this.pqrs),console.log("Informacion ya tiene resultado")},e=>{console.log(JSON.stringify(e))}):0==this.indicador&&this.servi.ObtenerJson().subscribe(e=>{for(this.pqrs=e.results,this.i=0;this.i<this.pqrs.length;this.i++){this.fechatemp=this.pqrs[this.i].FechaPublicacion,this.fechartemp=this.pqrs[this.i].FechaRespuesta;var t=this.fechatemp.split("T",2),i=this.fechartemp.split("T",2);this.fechatemp=t[0],this.fechartemp=i[0],this.pqrs[this.i].FechaPublicacion=this.fechatemp,this.pqrs[this.i].FechaRespuesta=this.fechartemp}this.pqrs=this.pqrs.filter(e=>""!=e.Respuesta)},e=>{console.log(JSON.stringify(e))})}listarContestados(){1==this.indicador?(this.indicador=!1,this.indicadorBoton="PQR Sin contestar"):0==this.indicador&&(this.indicador=!0,this.indicadorBoton="PQR Contestados"),this.refrescar()}ngOnInit(){this.ObtenerPqrs()}eliminar(e){r.a.fire({title:"Estas seguro?",text:" No se podra recuperar la informacion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrar!"}).then(t=>{t.value&&(r.a.fire("Borrado!"," la informacion ha sido eliminada","success"),this.servi.Eliminar(e),this.refrescar())})}refrescar(){this.ObtenerPqrs(),this.ObtenerPqrs(),this.ngOnInit()}guardar({value:e}){console.log(e),""==e.Respuesta?r.a.fire("Por favor Ingrese una respuesta!","Respuesta no  enviada!","error"):e.Respuesta.length<10?r.a.fire("La respuesta debe tener como minimo 10 caracteres!","Respuesta no  enviada!","error"):r.a.fire({title:"Esta seguro?",text:"Desea enviar esta respuesta?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, guardar!"}).then(t=>{t.value&&(r.a.fire("Guardado!","La respuesta ha sido enviada ","success"),e.UEstadoPQRId=2,e.UEstadoPQR.Id=2,e.UEstadoPQR.Nombre="Resuelto",console.log(e),this.servi.update(e,e.Id),this.refrescar())})}}return e.\u0275fac=function(t){return new(t||e)(s.Vb(b),s.Vb(a.b))},e.\u0275cmp=s.Pb({type:e,selectors:[["app-listar"]],decls:31,vars:7,consts:[["id","main-header",1,"py-2","bg-info","text-white"],[1,"container"],[1,"row"],[1,"col-md-4"],["align","center"],[1,"form-group"],["type","text","name","filterpregunta","placeholder","Buscar pqrs por Asunto ...",1,"form-control",3,"ngModel","ngModelChange"],[1,"fas","fa-list-ol"],[1,"display-4"],[1,"col-md-3"],[3,"submit"],["type","submit",1,"btn","btn-info"],[1,"fas","fa-list"],[4,"ngIf"],["id","pqrs"],[1,"col-md-12"],[1,"row","row-cols-1","row-cols-md-3"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"text-center"],[3,"pageChange"],[1,"col","mb-4"],[1,"card","h-100"],[1,"card-header"],[1,"fa","fa-question-circle"],[1,"car-body","container"],[3,"ngSubmit"],["pqrForm","ngForm"],[1,"card-text"],[1,"fa","fa-user"],[1,"fa","fa-calendar"],["type","hidden","name","FechaPublicacion",1,"form-control",3,"ngModel","ngModelChange"],["FechaPublicacion","ngModel"],["type","hidden","name","FechaRespuesta",1,"form-control",3,"ngModel","ngModelChange"],["FechaRespuesta","ngModel"],["type","hidden","name","Id",1,"form-control",3,"ngModel","ngModelChange"],["Id","ngModel"],["type","hidden","name","LastModification",1,"form-control",3,"ngModel","ngModelChange"],["LastModification","ngModel"],["type","hidden","name","Pregunta",1,"form-control",3,"ngModel","ngModelChange"],["Pregunta","ngModel"],[1,"fa","fa-pencil-alt"],["name","comentarios","rows","4","cols","38",3,"ngModel","ngModelChange"],["type","hidden","name","Respuesta",1,"form-control",3,"ngModel","ngModelChange"],["Respuesta","ngModel"],["type","hidden","name","Token",1,"form-control",3,"ngModel","ngModelChange"],["Token","ngModel"],["type","hidden","name","UEstadoPQR",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQR","ngModel"],["type","hidden","name","UEstadoPQRId",1,"form-control",3,"ngModel","ngModelChange"],["UEstadoPQRId","ngModel"],["type","hidden","name","UUsuario",1,"form-control",3,"ngModel","ngModelChange"],["UUsuario","ngModel"],["type","hidden","name","UUsuarioId",1,"form-control",3,"ngModel","ngModelChange"],["UUsuarioId","ngModel"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","200"],[1,"fas","fa-share-square"],[1,"col-md-6"],["type","submit",1,"btn","btn-danger","btn-block",2,"width","130"],[1,"fas","fa-trash"],["type","submit",1,"btn","btn-primary","btn-block",2,"width","130"]],template:function(e,t){1&e&&(s.ac(0,"header",0),s.ac(1,"div",1),s.ac(2,"div",2),s.ac(3,"div",3),s.ac(4,"div",4),s.ac(5,"h1"),s.Dc(6," Gestion De PQRS "),s.Zb(),s.ac(7,"div",5),s.ac(8,"input",6),s.ic("ngModelChange",(function(e){return t.filterpregunta=e})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(9,"div",3),s.ac(10,"div",1),s.ac(11,"div",4),s.ac(12,"h3"),s.Wb(13,"i",7),s.Dc(14," Total de pqrs "),s.Zb(),s.ac(15,"h4",8),s.Dc(16),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(17,"div",9),s.ac(18,"div",1),s.ac(19,"div",4),s.Wb(20,"br"),s.ac(21,"form",10),s.ic("submit",(function(){return t.listarContestados()})),s.ac(22,"button",11),s.ac(23,"h4"),s.Wb(24,"i",12),s.Dc(25),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Bc(26,f,5,0,"div",13),s.Bc(27,m,5,0,"div",13),s.Wb(28,"br"),s.Bc(29,v,10,9,"div",13),s.Bc(30,P,10,9,"div",13)),2&e&&(s.Jb(8),s.rc("ngModel",t.filterpregunta),s.Jb(8),s.Fc(" ",null==t.pqrs?null:t.pqrs.length," "),s.Jb(9),s.Fc(" ",t.indicadorBoton,""),s.Jb(1),s.rc("ngIf",0==t.pqrs.length&&"PQR Contestados"==t.indicadorBoton),s.Jb(1),s.rc("ngIf",0==t.pqrs.length&&"PQR Sin contestar"==t.indicadorBoton),s.Jb(2),s.rc("ngIf",1==t.indicador),s.Jb(1),s.rc("ngIf",0==t.indicador))},directives:[h.a,h.g,h.j,h.s,h.h,h.i,n.m,n.l,p.c],pipes:[p.b,g],styles:[""]}),e})();i.d(t,"ListarModule",(function(){return U}));let U=(()=>{class e{}return e.\u0275mod=s.Tb({type:e}),e.\u0275inj=s.Sb({factory:function(t){return new(t||e)},imports:[[n.b,h.e,p.a,c.a,a.e.forChild([{path:"",component:C}])]]}),e})()}}]);