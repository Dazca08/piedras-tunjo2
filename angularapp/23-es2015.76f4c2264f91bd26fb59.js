(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{QbiK:function(e,i,n){"use strict";n.r(i);var o=n("ofXK"),t=n("PSD3"),a=n.n(t),r=n("fXoL"),c=n("3Pt+"),s=n("Kn+P"),l=n("tyNb");const d=function(e){return{"is-invalid":e}};let b=(()=>{class e{constructor(e,i,n,o){this.formBuilder=e,this.servi=i,this.Router=n,this.route=o,this.control="noticia",this.noti={titulo:"",descripcion:"",fechaPublicacion:Date.now().toString(),imagenesUrl:this.control},this.selectedfile=null,this.imagen_actual=""}onFileSelected(e){console.log(this.imagen_actual),this.selectedfile=e.target.files[0],this.imagen_actual=this.selectedfile.name.toString(),console.log("nueva imagen actual "+this.imagen_actual),this.noti.imagenesUrl=this.imagen_actual}guardar({value:e}){console.log(this.imagen_actual),console.log(this.noti.imagenesUrl),console.log(this.id),""==this.noti.fechaPublicacion?(console.log("error"),console.log("error Seleccione una Fecha"),a.a.fire("Por favor seleccione una fecha de publicacion para la noticia!","Fallo en edicion de noticia!","error")):""==this.noti.imagenesUrl?(console.log("error Seleccione una imagen"),a.a.fire("Por favor suba una Imagen !","Fallo en edicion de noticia!","error")):""==this.noti.titulo||""==this.noti.descripcion?(console.log("Debe llenar todos los campos"),a.a.fire("Debe llenar todos los campos","Fallo en edicion de noticia!","error")):a.a.fire({title:"\xbfEsta seguro?",text:"\xbfDesea guardar los cambios?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Guardar!"}).then(i=>{i.value&&(a.a.fire("Guardado!","La Noticia ha sido Actualizada","success"),e.id=this.id,this.servi.update(e,this.id),this.cargandoImagen(),this.refrescar(this.id))})}cargandoImagen(){console.log("cargar img"),this.servi.postFileImagen(this.selectedfile).subscribe(e=>{this.respuestaImagenEnviada=e,this.respuestaImagenEnviada<=1?console.log("Error en el servidor"):200==this.respuestaImagenEnviada.code&&"success"==this.respuestaImagenEnviada.status?(console.log("enviada"),this.resultadoCarga=1):this.resultadoCarga=2},e=>{console.log(e)})}refrescar(e){this.id=this.route.snapshot.params.id,this.servi.getu(this.id).subscribe(e=>{this.noti=e,this.imagen_actual="http://piedrasdeltunjo.tk/images/getImage?tipo=noticias&nombre="+this.noti.imagenesUrl}),this.ngOnInit()}ngOnInit(){this.id=this.route.snapshot.params.id,this.servi.getu(this.id).subscribe(e=>{this.noti=e,this.imagen_actual="http://piedrasdeltunjo.tk/images/getImage?tipo=noticias&nombre="+this.noti.imagenesUrl})}}return e.\u0275fac=function(i){return new(i||e)(r.Tb(c.b),r.Tb(s.a),r.Tb(l.b),r.Tb(l.a))},e.\u0275cmp=r.Nb({type:e,selectors:[["app-editar-noticias"]],decls:56,vars:19,consts:[[3,"ngSubmit"],["editarnotForm","ngForm"],[1,"container"],[1,"row",2,"padding-right","20%","padding-left","20%"],[1,"col-md-4"],["routerLink","/noticias",1,"btn","btn-dark","btn-block"],["type","submit",1,"btn","btn-success","btn-block"],[1,"col-md-12"],[1,"card",2,"margin-top","2%"],[1,"card-body"],[1,"form-group"],["for","titulo"],["type","text","name","titulo","required","","minlength","2",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["titulo","ngModel"],[1,"invalid-feedback",3,"hidden"],["for","descripcion"],["type","text","name","descripcion","required","","minlength","2",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["descripcion","ngModel"],["for","fechaPublicacion"],["type","date","name","fechaPublicacion",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["fechaPublicacion","ngModel"],["align","center"],["alt","Responsive image","width","700","height","400",1,"img-fluid",3,"src"],["for","imagenesUrl"],["type","file",3,"change"],["type","hidden","name","imagenesUrl",1,"form-control",3,"ngModel","ngModelChange"],["imagenesUrl","ngModel"]],template:function(e,i){if(1&e){const e=r.Zb();r.Yb(0,"form",0,1),r.gc("ngSubmit",(function(){r.uc(e);const n=r.tc(1);return i.guardar(n)})),r.Yb(2,"section"),r.Yb(3,"div",2),r.Yb(4,"div",3),r.Yb(5,"div",4),r.Yb(6,"h4"),r.zc(7,"Editar Noticia"),r.Xb(),r.Xb(),r.Yb(8,"div",4),r.Yb(9,"a",5),r.zc(10,"Regresar al inicio"),r.Xb(),r.Xb(),r.Yb(11,"div",4),r.Yb(12,"button",6),r.zc(13,"Guardar cambios"),r.Xb(),r.Xb(),r.Yb(14,"div",7),r.Yb(15,"div",8),r.Yb(16,"div",9),r.Yb(17,"div",10),r.Yb(18,"label",11),r.zc(19,"Titulo:"),r.Xb(),r.Yb(20,"input",12,13),r.gc("ngModelChange",(function(e){return i.noti.titulo=e})),r.Xb(),r.Yb(22,"div",14),r.zc(23," Titulo requerido "),r.Xb(),r.Yb(24,"div",14),r.zc(25," Debe escribir un titulo mas largo "),r.Xb(),r.Xb(),r.Yb(26,"div",10),r.Yb(27,"label",15),r.zc(28,"Descripcion:"),r.Xb(),r.Yb(29,"input",16,17),r.gc("ngModelChange",(function(e){return i.noti.descripcion=e})),r.Xb(),r.Yb(31,"div",14),r.zc(32," Contenido requerido "),r.Xb(),r.Yb(33,"div",14),r.zc(34," Debe escribir un Contenido mas largo "),r.Xb(),r.Xb(),r.Yb(35,"div",10),r.Yb(36,"label",18),r.zc(37,"Fecha de Publicacion:"),r.Xb(),r.Yb(38,"input",19,20),r.gc("ngModelChange",(function(e){return i.noti.fechaPublicacion=e})),r.Xb(),r.Yb(40,"div",14),r.zc(41," Fecha requerido "),r.Xb(),r.Xb(),r.Yb(42,"div",10),r.Yb(43,"div"),r.Yb(44,"div"),r.Yb(45,"label"),r.zc(46,"Imagen Actual de la noticia"),r.Xb(),r.Xb(),r.Yb(47,"div",21),r.Ub(48,"img",22),r.Xb(),r.Xb(),r.Ub(49,"br"),r.Ub(50,"br"),r.Yb(51,"label",23),r.zc(52," Si desea cambiar la imagen actual de la noticia"),r.Xb(),r.Yb(53,"input",24),r.gc("change",(function(e){return i.onFileSelected(e)})),r.Xb(),r.Yb(54,"input",25,26),r.gc("ngModelChange",(function(e){return i.noti.imagenesUrl=e})),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&e){const e=r.tc(21),n=r.tc(30),o=r.tc(39);r.Hb(20),r.mc("ngModel",i.noti.titulo)("ngClass",r.qc(13,d,e.errors&&e.touched)),r.Hb(2),r.mc("hidden",!(null!=e.errors&&e.errors.required)),r.Hb(2),r.mc("hidden",!(null!=e.errors&&e.errors.minlength)),r.Hb(5),r.mc("ngModel",i.noti.descripcion)("ngClass",r.qc(15,d,n.errors&&n.touched)),r.Hb(2),r.mc("hidden",!(null!=n.errors&&n.errors.required)),r.Hb(2),r.mc("hidden",!(null!=n.errors&&n.errors.minlength)),r.Hb(5),r.mc("ngModel",i.noti.fechaPublicacion)("ngClass",r.qc(17,d,o.errors&&o.touched)),r.Hb(2),r.mc("hidden",!(null!=o.errors&&o.errors.required)),r.Hb(8),r.nc("src",i.imagen_actual,r.vc),r.Hb(6),r.mc("ngModel",i.noti.imagenesUrl)}},directives:[c.s,c.h,c.i,l.d,c.a,c.o,c.f,c.g,c.j,o.i],styles:[""]}),e})();var u=n("iTUp");n.d(i,"EditarModule",(function(){return g}));let g=(()=>{class e{}return e.\u0275mod=r.Rb({type:e}),e.\u0275inj=r.Qb({factory:function(i){return new(i||e)},imports:[[o.b,c.e,u.a,l.e.forChild([{path:"",component:b}])]]}),e})()}}]);