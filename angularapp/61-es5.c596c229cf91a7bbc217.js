function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,r,o){return r&&_defineProperties(e.prototype,r),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"/o/6":function(e,r,o){"use strict";o.r(r);var a=o("ofXK"),n=o("mrSG"),t=o("3Pt+"),c=o("PSD3"),i=o.n(c),s=o("fXoL"),l=o("0ceX"),u=o("on2l"),d=o("tyNb"),b=o("4r22"),m=o("VOj4");function f(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El nombre es requerido "),s.Zb())}function p(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El apellido es requerido "),s.Zb())}function g(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El tipo de documento es requerido "),s.Zb())}function v(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El n\xfamero de documento es requerido "),s.Zb())}function C(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," La fecha de nacimiento es requerida "),s.Zb())}function Z(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El lugar de expedici\xf3n es requerido "),s.Zb())}function h(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El correo es requerido "),s.Zb())}function k(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," Formato incorrecto para correo "),s.Zb())}function y(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," La contrase\xf1a es requerida "),s.Zb())}function x(e,r){if(1&e&&(s.ac(0,"span"),s.Cc(1),s.Zb()),2&e){var o=s.kc(2);s.Jb(1),s.Ec(" Debe contener m\xednimo ",null==o.clave.errors?null:o.clave.errors.minlength.requiredLength," caracteres ")}}function E(e,r){if(1&e&&(s.ac(0,"option",35),s.Cc(1),s.Zb()),2&e){var o=r.$implicit;s.rc("value",o.id),s.Jb(1),s.Dc(o.nombre)}}function N(e,r){1&e&&(s.ac(0,"span"),s.Cc(1," El rol es requerido "),s.Zb())}function q(e,r){if(1&e){var o=s.bc();s.ac(0,"div",3),s.ac(1,"form",4),s.ic("ngSubmit",(function(){return s.yc(o),s.kc().onSubmit()})),s.ac(2,"div",5),s.ac(3,"b",6),s.Cc(4,"NUEVO USUARIO"),s.Zb(),s.ac(5,"div",7),s.ac(6,"button",8),s.Wb(7,"i",9),s.Zb(),s.Zb(),s.Zb(),s.ac(8,"div",10),s.ac(9,"div",11),s.ac(10,"app-avatar-selector",12),s.ic("avatarSelected",(function(e){return s.yc(o),s.kc().avatar=e})),s.Zb(),s.Zb(),s.ac(11,"div",13),s.ac(12,"div",14),s.ac(13,"div",15),s.ac(14,"b",6),s.Cc(15,"Nombre"),s.Zb(),s.Wb(16,"input",16),s.ac(17,"div",17),s.Cc(18,"Ok!"),s.Zb(),s.ac(19,"div",18),s.Bc(20,f,2,0,"span",19),s.Zb(),s.Zb(),s.ac(21,"div",15),s.ac(22,"b",6),s.Cc(23,"Apellido"),s.Zb(),s.Wb(24,"input",20),s.ac(25,"div",17),s.Cc(26,"Ok!"),s.Zb(),s.ac(27,"div",18),s.Bc(28,p,2,0,"span",19),s.Zb(),s.Zb(),s.ac(29,"div",15),s.ac(30,"b",6),s.Cc(31,"Tipo documento"),s.Zb(),s.ac(32,"select",21),s.ac(33,"option",22),s.Cc(34,"Tarjeta de Identidad"),s.Zb(),s.ac(35,"option",23),s.Cc(36,"C\xe9dula Ciudadania"),s.Zb(),s.Zb(),s.ac(37,"div",17),s.Cc(38,"Ok!"),s.Zb(),s.ac(39,"div",18),s.Bc(40,g,2,0,"span",19),s.Zb(),s.Zb(),s.ac(41,"div",15),s.ac(42,"b",6),s.Cc(43,"N\xfamero de documento"),s.Zb(),s.Wb(44,"input",24),s.ac(45,"div",17),s.Cc(46,"Ok!"),s.Zb(),s.ac(47,"div",18),s.Bc(48,v,2,0,"span",19),s.Zb(),s.Zb(),s.ac(49,"div",15),s.ac(50,"b",6),s.Cc(51,"Fecha nacimiento"),s.Zb(),s.Wb(52,"input",25),s.ac(53,"div",17),s.Cc(54,"Ok!"),s.Zb(),s.ac(55,"div",18),s.Bc(56,C,2,0,"span",19),s.Zb(),s.Zb(),s.Zb(),s.ac(57,"div",14),s.ac(58,"div",15),s.ac(59,"b",6),s.Cc(60,"Lugar Expedici\xf3n"),s.Zb(),s.Wb(61,"input",26),s.ac(62,"div",17),s.Cc(63,"Ok!"),s.Zb(),s.ac(64,"div",18),s.Bc(65,Z,2,0,"span",19),s.Zb(),s.Zb(),s.ac(66,"div",15),s.ac(67,"b",6),s.Cc(68,"Correo electr\xf3nico"),s.Zb(),s.Wb(69,"input",27),s.ac(70,"div",17),s.Cc(71,"Ok!"),s.Zb(),s.ac(72,"div",18),s.Bc(73,h,2,0,"span",19),s.Bc(74,k,2,0,"span",19),s.Zb(),s.Zb(),s.ac(75,"div",15),s.ac(76,"b",6),s.Cc(77,"Contrase\xf1a"),s.Zb(),s.Wb(78,"input",28),s.ac(79,"div",17),s.Cc(80,"Ok!"),s.Zb(),s.ac(81,"div",18),s.Bc(82,y,2,0,"span",19),s.Bc(83,x,2,1,"span",19),s.Zb(),s.Zb(),s.ac(84,"div",15),s.ac(85,"b",6),s.Cc(86,"Rol"),s.Zb(),s.ac(87,"select",29),s.Bc(88,E,2,2,"option",30),s.lc(89,"rolesCreate"),s.Zb(),s.ac(90,"div",17),s.Cc(91,"Ok!"),s.Zb(),s.ac(92,"div",18),s.Bc(93,N,2,0,"span",19),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(94,"div",31),s.ac(95,"div",32),s.ac(96,"div",33),s.ac(97,"button",34),s.Cc(98,"Agregar"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&e){var a=s.kc();s.Jb(1),s.rc("formGroup",a.formUsuario),s.Jb(15),s.rc("ngClass",a.getValidationClass("Nombre")),s.Jb(4),s.rc("ngIf",null==a.nombre.errors?null:a.nombre.errors.required),s.Jb(4),s.rc("ngClass",a.getValidationClass("Apellido")),s.Jb(4),s.rc("ngIf",null==a.apellido.errors?null:a.apellido.errors.required),s.Jb(4),s.rc("ngClass",a.getValidationClass("TipoDocumento")),s.Jb(8),s.rc("ngIf",null==a.tipoDoc.errors?null:a.tipoDoc.errors.required),s.Jb(4),s.rc("ngClass",a.getValidationClass("NumeroDocumento")),s.Jb(4),s.rc("ngIf",null==a.numeroDoc.errors?null:a.numeroDoc.errors.required),s.Jb(4),s.rc("ngClass",a.getValidationClass("FechaNacimiento")),s.Jb(4),s.rc("ngIf",null==a.fechaNac.errors?null:a.fechaNac.errors.required),s.Jb(5),s.rc("ngClass",a.getValidationClass("LugarExpedicion")),s.Jb(4),s.rc("ngIf",null==a.lugarExp.errors?null:a.lugarExp.errors.required),s.Jb(4),s.rc("ngClass",a.getValidationClass("CorreoElectronico")),s.Jb(4),s.rc("ngIf",null==a.correo.errors?null:a.correo.errors.required),s.Jb(1),s.rc("ngIf",null==a.correo.errors?null:a.correo.errors.pattern),s.Jb(4),s.rc("ngClass",a.getValidationClass("Clave")),s.Jb(4),s.rc("ngIf",null==a.clave.errors?null:a.clave.errors.required),s.Jb(1),s.rc("ngIf",null==a.clave.errors?null:a.clave.errors.minlength),s.Jb(4),s.rc("ngClass",a.getValidationClass("RolId")),s.Jb(1),s.rc("ngForOf",s.mc(89,23,a.roles)),s.Jb(5),s.rc("ngIf",null==a.clave.errors?null:a.clave.errors.required),s.Jb(4),s.rc("disabled",a.formUsuario.invalid)}}var J,I=((J=function(){function e(r,o,a,n){_classCallCheck(this,e),this.fb=r,this.rolService=o,this.usuarioService=a,this.router=n,this.roles=[],this.avatar="av-1.png"}return _createClass(e,[{key:"ngOnInit",value:function(){this.prepareForm()}},{key:"onSubmit",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.assign(Object.assign({},this.formUsuario.value),{Icono_url:this.avatar,VerificacionCuenta:!0,EstadoCuenta:!0,Imagen_documento:null}),!((o=r.NumeroDocumento.toString()).length>10||o.length<7)){e.next=5;break}this.mostrarMensajeError("El n\xfamero de documento no cumple (7-10) digitos"),e.next=22;break;case 5:return e.next=7,this.usuarioService.existeCorreo(r.CorreoElectronico);case 7:if(!e.sent){e.next=11;break}this.mostrarMensajeError("El correo ya est\xe1 siendo utilizado"),e.next=22;break;case 11:return e.next=13,this.usuarioService.existeNumeroDoc(r.NumeroDocumento);case 13:if(!e.sent){e.next=17;break}this.mostrarMensajeError("El n\xfamero de documento ya existe"),e.next=22;break;case 17:return e.next=19,this.usuarioService.agregarUsuario(r);case 19:if(e.t0=e.sent,!e.t0){e.next=22;break}i.a.fire({title:"Bien",text:"Usuario agregado",icon:"success"}),this.router.navigateByUrl("/usuarios");case 22:case"end":return e.stop()}}),e,this)})))}},{key:"mostrarMensajeError",value:function(e){i.a.fire({title:"Error",text:e,icon:"error"})}},{key:"prepareForm",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rolService.getRoles();case 2:this.roles=e.sent,this.formUsuario=this.fb.group({Nombre:["",t.p.required],Apellido:["",t.p.required],TipoDocumento:["TI",t.p.required],NumeroDocumento:[0,t.p.required],FechaNacimiento:["2020-01-01",t.p.required],LugarExpedicion:["",t.p.required],CorreoElectronico:["",[t.p.required,t.p.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],Clave:["",[t.p.required,t.p.minLength(5)]],RolId:[3,t.p.required]});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getValidationClass",value:function(e){var r=this.formUsuario.get(e);return r.untouched&&r.pristine?{}:{"is-valid":r.valid,"is-invalid":r.invalid}}},{key:"nombre",get:function(){return this.formUsuario.get("Nombre")}},{key:"apellido",get:function(){return this.formUsuario.get("Apellido")}},{key:"tipoDoc",get:function(){return this.formUsuario.get("TipoDocumento")}},{key:"numeroDoc",get:function(){return this.formUsuario.get("NumeroDocumento")}},{key:"fechaNac",get:function(){return this.formUsuario.get("FechaNacimiento")}},{key:"lugarExp",get:function(){return this.formUsuario.get("LugarExpedicion")}},{key:"correo",get:function(){return this.formUsuario.get("CorreoElectronico")}},{key:"clave",get:function(){return this.formUsuario.get("Clave")}},{key:"rolId",get:function(){return this.formUsuario.get("RolId")}}]),e}()).\u0275fac=function(e){return new(e||J)(s.Vb(t.b),s.Vb(l.a),s.Vb(u.a),s.Vb(d.b))},J.\u0275cmp=s.Pb({type:J,selectors:[["app-agregar"]],decls:3,vars:1,consts:[[1,"row","justify-content-center","mt-3"],[1,"col-md-10","col-sm-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[3,"formGroup","ngSubmit"],[1,"card-header","text-center"],[1,"text-muted"],[1,"float-left"],["routerLink","/usuarios",1,"btn","btm-sm","btn-light","shadow"],[1,"fas","fa-arrow-left"],[1,"card-body"],[1,"container","text-center"],[3,"avatarSelected"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["type","text","formControlName","Nombre",1,"form-control",3,"ngClass"],[1,"valid-feedback"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","formControlName","Apellido",1,"form-control",3,"ngClass"],["formControlName","TipoDocumento",1,"form-control",3,"ngClass"],["value","TI"],["value","CC"],["type","number","formControlName","NumeroDocumento",1,"form-control",3,"ngClass"],["type","date","formControlName","FechaNacimiento",1,"form-control",3,"ngClass"],["type","text","formControlName","LugarExpedicion",1,"form-control",3,"ngClass"],["type","text","formControlName","CorreoElectronico",1,"form-control",3,"ngClass"],["type","password","formControlName","Clave",1,"form-control",3,"ngClass"],["formControlName","RolId",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer","text-center"],[1,"row","justify-content-center"],[1,"col-md-4","col-sm-6"],[1,"btn","btn-block","btn-primary",3,"disabled"],[3,"value"]],template:function(e,r){1&e&&(s.ac(0,"div",0),s.ac(1,"div",1),s.Bc(2,q,99,25,"div",2),s.Zb(),s.Zb()),2&e&&(s.Jb(2),s.rc("ngIf",r.formUsuario))},directives:[a.m,t.r,t.h,t.d,d.c,b.a,t.a,t.g,t.c,a.k,t.o,t.k,t.q,t.l,a.l],pipes:[m.a],styles:[""]}),J),w=o("j1ZV"),U=o("iTUp");o.d(r,"AgregarModule",(function(){return O}));var D,O=((D=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:D}),D.\u0275inj=s.Sb({factory:function(e){return new(e||D)},imports:[[a.b,t.e,t.m,w.a,U.a,d.e.forChild([{path:"",component:I}])]]}),D)}}]);