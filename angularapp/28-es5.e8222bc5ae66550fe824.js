function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{PfLU:function(i,t,e){"use strict";e.r(t);var r=e("ofXK"),n=e("tyNb"),a=e("mrSG"),c=e("3Pt+"),o=e("fXoL"),s=e("lA0O"),u=e("zbXe"),l=e("SZog"),d=e("yR31"),b=e("HpFY");function f(i,t){1&i&&(o.ac(0,"span"),o.Cc(1," El titulo es requerido "),o.Zb())}function p(i,t){1&i&&(o.ac(0,"span"),o.Cc(1," La descripci\xf3n es requerida "),o.Zb())}function m(i,t){if(1&i){var e=o.bc();o.ac(0,"div",2),o.ac(1,"button",3),o.Wb(2,"i",4),o.Zb(),o.ac(3,"form",5),o.ic("ngSubmit",(function(){return o.yc(e),o.kc().onSubmit()})),o.ac(4,"div",6),o.ac(5,"div",7),o.ac(6,"b",8),o.Cc(7,"EDITAR NOTICIA"),o.Zb(),o.Zb(),o.ac(8,"div",9),o.ac(9,"div",10),o.ac(10,"div",11),o.ac(11,"div",12),o.ac(12,"b",8),o.Cc(13,"Titulo"),o.Zb(),o.Wb(14,"input",13),o.ac(15,"div",14),o.Cc(16,"Ok!"),o.Zb(),o.ac(17,"div",15),o.Bc(18,f,2,0,"span",16),o.Zb(),o.Zb(),o.ac(19,"div",12),o.ac(20,"b",8),o.Cc(21,"Descripci\xf3n"),o.Zb(),o.Wb(22,"textarea",17),o.ac(23,"div",14),o.Cc(24,"Ok!"),o.Zb(),o.ac(25,"div",15),o.Bc(26,p,2,0,"span",16),o.Zb(),o.Zb(),o.ac(27,"app-images-upload",18),o.ic("changeFiles",(function(i){return o.yc(e),o.kc().onChangeFile(i)})),o.Zb(),o.Zb(),o.ac(28,"div",11),o.Wb(29,"app-carousel-images",19),o.lc(30,"imgUrlToArray"),o.Zb(),o.Zb(),o.Zb(),o.ac(31,"div",20),o.ac(32,"button",21),o.Cc(33,"Actualizar"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&i){var r=o.kc();o.Jb(3),o.rc("formGroup",r.formEditNoticia),o.Jb(11),o.rc("ngClass",r.getValidationClass("titulo")),o.Jb(4),o.rc("ngIf",null==r.titulo.errors?null:r.titulo.errors.required),o.Jb(4),o.rc("ngClass",r.getValidationClass("descripcion")),o.Jb(4),o.rc("ngIf",null==r.descripcion.errors?null:r.descripcion.errors.required),o.Jb(3),o.rc("imagenes",o.mc(30,7,r.noticia.imagenesUrl)),o.Jb(3),o.rc("disabled",r.formEditNoticia.invalid)}}var v,h=((v=function(){function i(t,e,r,n,a){_classCallCheck(this,i),this.route=t,this.router=e,this.imagesService=r,this.noticiasService=n,this.fb=a,this.noticia=void 0,this.files=[]}return _createClass(i,[{key:"ngOnInit",value:function(){this.prepareUpdate()}},{key:"prepareUpdate",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var t,e=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=this.route.snapshot.paramMap.get("id"),this.noticiasService.getNoticia(Number(t)).then((function(i){e.noticia=i,e.formEditNoticia=e.fb.group({titulo:[i.titulo,c.p.required],descripcion:[i.descripcion,c.p.required]})}));case 2:case"end":return i.stop()}}),i,this)})))}},{key:"onChangeFile",value:function(i){this.files=i}},{key:"onSubmit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var t,e,r,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.formEditNoticia.value,e=t.titulo,r=t.descripcion,this.noticia.titulo=e,this.noticia.descripcion=r,!(this.files.length>0)){i.next=6;break}return i.next=4,this.imagesService.uploadMultipleImages(this.files,"noticia");case 4:n=i.sent,this.imagesService.deleteImages(this.noticia.imagenesUrl,"noticia"),this.noticia.imagenesUrl=n;case 6:return i.next=8,this.noticiasService.actualizarNoticia(this.noticia);case 8:if(i.t0=i.sent,!i.t0){i.next=11;break}this.router.navigateByUrl("/noticias");case 11:case"end":return i.stop()}}),i,this)})))}},{key:"getValidationClass",value:function(i){var t=this.formEditNoticia.get(i);return t.untouched&&t.pristine?{}:{"is-valid":t.valid,"is-invalid":t.invalid}}},{key:"titulo",get:function(){return this.formEditNoticia.get("titulo")}},{key:"descripcion",get:function(){return this.formEditNoticia.get("descripcion")}}]),i}()).\u0275fac=function(i){return new(i||v)(o.Vb(n.a),o.Vb(n.b),o.Vb(s.a),o.Vb(u.a),o.Vb(c.b))},v.\u0275cmp=o.Pb({type:v,selectors:[["app-editar"]],decls:2,vars:1,consts:[[1,"row","justify-content-center","mt-2"],["class","col-md-8 col-sm-12",4,"ngIf"],[1,"col-md-8","col-sm-12"],["routerLink","/noticias",1,"btn","btm-sm","btn-primary"],[1,"fas","fa-arrow-left"],[3,"formGroup","ngSubmit"],[1,"card","shadow"],[1,"card-header","text-center"],[1,"text-muted"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["type","text","formControlName","titulo",1,"form-control",3,"ngClass"],[1,"valid-feedback"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","descripcion",1,"form-control",3,"ngClass"],[3,"changeFiles"],["tipo","noticia",3,"imagenes"],[1,"card-footer","text-center"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(i,t){1&i&&(o.ac(0,"div",0),o.Bc(1,m,34,9,"div",1),o.Zb()),2&i&&(o.Jb(1),o.rc("ngIf",t.noticia))},directives:[r.m,n.c,c.r,c.h,c.d,c.a,c.g,c.c,r.k,l.a,d.a],pipes:[b.a],styles:[""]}),v),g=e("j1ZV"),C=e("iTUp");e.d(t,"EditarModule",(function(){return y}));var k,y=((k=function i(){_classCallCheck(this,i)}).\u0275mod=o.Tb({type:k}),k.\u0275inj=o.Sb({factory:function(i){return new(i||k)},imports:[[r.b,c.e,c.m,n.e.forChild([{path:"",component:h}]),g.a,C.a]]}),k)}}]);