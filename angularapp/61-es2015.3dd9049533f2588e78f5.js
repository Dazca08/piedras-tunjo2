(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"/o/6":function(r,e,o){"use strict";o.r(e);var a=o("ofXK"),c=o("mrSG"),t=o("3Pt+"),n=o("PSD3"),i=o.n(n),s=o("fXoL"),l=o("0ceX"),u=o("on2l"),d=o("tyNb"),b=o("4r22"),m=o("VOj4");function p(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El nombre es requerido "),s.Zb())}function g(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El apellido es requerido "),s.Zb())}function f(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El tipo de documento es requerido "),s.Zb())}function C(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El n\xfamero de documento es requerido "),s.Zb())}function v(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," La fecha de nacimiento es requerida "),s.Zb())}function Z(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El lugar de expedici\xf3n es requerido "),s.Zb())}function h(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El correo es requerido "),s.Zb())}function E(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," Formato incorrecto para correo "),s.Zb())}function N(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," La contrase\xf1a es requerida "),s.Zb())}function q(r,e){if(1&r&&(s.ac(0,"span"),s.Cc(1),s.Zb()),2&r){const r=s.kc(2);s.Jb(1),s.Ec(" Debe contener m\xednimo ",null==r.clave.errors?null:r.clave.errors.minlength.requiredLength," caracteres ")}}function J(r,e){if(1&r&&(s.ac(0,"option",35),s.Cc(1),s.Zb()),2&r){const r=e.$implicit;s.rc("value",r.id),s.Jb(1),s.Dc(r.nombre)}}function I(r,e){1&r&&(s.ac(0,"span"),s.Cc(1," El rol es requerido "),s.Zb())}function y(r,e){if(1&r){const r=s.bc();s.ac(0,"div",3),s.ac(1,"form",4),s.ic("ngSubmit",(function(){return s.yc(r),s.kc().onSubmit()})),s.ac(2,"div",5),s.ac(3,"b",6),s.Cc(4,"NUEVO USUARIO"),s.Zb(),s.ac(5,"div",7),s.ac(6,"button",8),s.Wb(7,"i",9),s.Zb(),s.Zb(),s.Zb(),s.ac(8,"div",10),s.ac(9,"div",11),s.ac(10,"app-avatar-selector",12),s.ic("avatarSelected",(function(e){return s.yc(r),s.kc().avatar=e})),s.Zb(),s.Zb(),s.ac(11,"div",13),s.ac(12,"div",14),s.ac(13,"div",15),s.ac(14,"b",6),s.Cc(15,"Nombre"),s.Zb(),s.Wb(16,"input",16),s.ac(17,"div",17),s.Cc(18,"Ok!"),s.Zb(),s.ac(19,"div",18),s.Bc(20,p,2,0,"span",19),s.Zb(),s.Zb(),s.ac(21,"div",15),s.ac(22,"b",6),s.Cc(23,"Apellido"),s.Zb(),s.Wb(24,"input",20),s.ac(25,"div",17),s.Cc(26,"Ok!"),s.Zb(),s.ac(27,"div",18),s.Bc(28,g,2,0,"span",19),s.Zb(),s.Zb(),s.ac(29,"div",15),s.ac(30,"b",6),s.Cc(31,"Tipo documento"),s.Zb(),s.ac(32,"select",21),s.ac(33,"option",22),s.Cc(34,"Tarjeta de Identidad"),s.Zb(),s.ac(35,"option",23),s.Cc(36,"C\xe9dula Ciudadania"),s.Zb(),s.Zb(),s.ac(37,"div",17),s.Cc(38,"Ok!"),s.Zb(),s.ac(39,"div",18),s.Bc(40,f,2,0,"span",19),s.Zb(),s.Zb(),s.ac(41,"div",15),s.ac(42,"b",6),s.Cc(43,"N\xfamero de documento"),s.Zb(),s.Wb(44,"input",24),s.ac(45,"div",17),s.Cc(46,"Ok!"),s.Zb(),s.ac(47,"div",18),s.Bc(48,C,2,0,"span",19),s.Zb(),s.Zb(),s.ac(49,"div",15),s.ac(50,"b",6),s.Cc(51,"Fecha nacimiento"),s.Zb(),s.Wb(52,"input",25),s.ac(53,"div",17),s.Cc(54,"Ok!"),s.Zb(),s.ac(55,"div",18),s.Bc(56,v,2,0,"span",19),s.Zb(),s.Zb(),s.Zb(),s.ac(57,"div",14),s.ac(58,"div",15),s.ac(59,"b",6),s.Cc(60,"Lugar Expedici\xf3n"),s.Zb(),s.Wb(61,"input",26),s.ac(62,"div",17),s.Cc(63,"Ok!"),s.Zb(),s.ac(64,"div",18),s.Bc(65,Z,2,0,"span",19),s.Zb(),s.Zb(),s.ac(66,"div",15),s.ac(67,"b",6),s.Cc(68,"Correo electr\xf3nico"),s.Zb(),s.Wb(69,"input",27),s.ac(70,"div",17),s.Cc(71,"Ok!"),s.Zb(),s.ac(72,"div",18),s.Bc(73,h,2,0,"span",19),s.Bc(74,E,2,0,"span",19),s.Zb(),s.Zb(),s.ac(75,"div",15),s.ac(76,"b",6),s.Cc(77,"Contrase\xf1a"),s.Zb(),s.Wb(78,"input",28),s.ac(79,"div",17),s.Cc(80,"Ok!"),s.Zb(),s.ac(81,"div",18),s.Bc(82,N,2,0,"span",19),s.Bc(83,q,2,1,"span",19),s.Zb(),s.Zb(),s.ac(84,"div",15),s.ac(85,"b",6),s.Cc(86,"Rol"),s.Zb(),s.ac(87,"select",29),s.Bc(88,J,2,2,"option",30),s.lc(89,"rolesCreate"),s.Zb(),s.ac(90,"div",17),s.Cc(91,"Ok!"),s.Zb(),s.ac(92,"div",18),s.Bc(93,I,2,0,"span",19),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(94,"div",31),s.ac(95,"div",32),s.ac(96,"div",33),s.ac(97,"button",34),s.Cc(98,"Agregar"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&r){const r=s.kc();s.Jb(1),s.rc("formGroup",r.formUsuario),s.Jb(15),s.rc("ngClass",r.getValidationClass("Nombre")),s.Jb(4),s.rc("ngIf",null==r.nombre.errors?null:r.nombre.errors.required),s.Jb(4),s.rc("ngClass",r.getValidationClass("Apellido")),s.Jb(4),s.rc("ngIf",null==r.apellido.errors?null:r.apellido.errors.required),s.Jb(4),s.rc("ngClass",r.getValidationClass("TipoDocumento")),s.Jb(8),s.rc("ngIf",null==r.tipoDoc.errors?null:r.tipoDoc.errors.required),s.Jb(4),s.rc("ngClass",r.getValidationClass("NumeroDocumento")),s.Jb(4),s.rc("ngIf",null==r.numeroDoc.errors?null:r.numeroDoc.errors.required),s.Jb(4),s.rc("ngClass",r.getValidationClass("FechaNacimiento")),s.Jb(4),s.rc("ngIf",null==r.fechaNac.errors?null:r.fechaNac.errors.required),s.Jb(5),s.rc("ngClass",r.getValidationClass("LugarExpedicion")),s.Jb(4),s.rc("ngIf",null==r.lugarExp.errors?null:r.lugarExp.errors.required),s.Jb(4),s.rc("ngClass",r.getValidationClass("CorreoElectronico")),s.Jb(4),s.rc("ngIf",null==r.correo.errors?null:r.correo.errors.required),s.Jb(1),s.rc("ngIf",null==r.correo.errors?null:r.correo.errors.pattern),s.Jb(4),s.rc("ngClass",r.getValidationClass("Clave")),s.Jb(4),s.rc("ngIf",null==r.clave.errors?null:r.clave.errors.required),s.Jb(1),s.rc("ngIf",null==r.clave.errors?null:r.clave.errors.minlength),s.Jb(4),s.rc("ngClass",r.getValidationClass("RolId")),s.Jb(1),s.rc("ngForOf",s.mc(89,23,r.roles)),s.Jb(5),s.rc("ngIf",null==r.clave.errors?null:r.clave.errors.required),s.Jb(4),s.rc("disabled",r.formUsuario.invalid)}}let x=(()=>{class r{constructor(r,e,o,a){this.fb=r,this.rolService=e,this.usuarioService=o,this.router=a,this.roles=[],this.avatar="av-1.png"}ngOnInit(){this.prepareForm()}onSubmit(){return Object(c.a)(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.formUsuario.value),{Icono_url:this.avatar,VerificacionCuenta:!0,EstadoCuenta:!0,Imagen_documento:null}),e=r.NumeroDocumento.toString();e.length>10||e.length<7?this.mostrarMensajeError("El n\xfamero de documento no cumple (7-10) digitos"):(yield this.usuarioService.existeCorreo(r.CorreoElectronico))?this.mostrarMensajeError("El correo ya est\xe1 siendo utilizado"):(yield this.usuarioService.existeNumeroDoc(r.NumeroDocumento))?this.mostrarMensajeError("El n\xfamero de documento ya existe"):(yield this.usuarioService.agregarUsuario(r))&&(i.a.fire({title:"Bien",text:"Usuario agregado",icon:"success"}),this.router.navigateByUrl("/usuarios"))}))}mostrarMensajeError(r){i.a.fire({title:"Error",text:r,icon:"error"})}prepareForm(){return Object(c.a)(this,void 0,void 0,(function*(){this.roles=yield this.rolService.getRoles(),this.formUsuario=this.fb.group({Nombre:["",t.p.required],Apellido:["",t.p.required],TipoDocumento:["TI",t.p.required],NumeroDocumento:[0,t.p.required],FechaNacimiento:["2020-01-01",t.p.required],LugarExpedicion:["",t.p.required],CorreoElectronico:["",[t.p.required,t.p.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],Clave:["",[t.p.required,t.p.minLength(5)]],RolId:[3,t.p.required]})}))}get nombre(){return this.formUsuario.get("Nombre")}get apellido(){return this.formUsuario.get("Apellido")}get tipoDoc(){return this.formUsuario.get("TipoDocumento")}get numeroDoc(){return this.formUsuario.get("NumeroDocumento")}get fechaNac(){return this.formUsuario.get("FechaNacimiento")}get lugarExp(){return this.formUsuario.get("LugarExpedicion")}get correo(){return this.formUsuario.get("CorreoElectronico")}get clave(){return this.formUsuario.get("Clave")}get rolId(){return this.formUsuario.get("RolId")}getValidationClass(r){const e=this.formUsuario.get(r);return e.untouched&&e.pristine?{}:{"is-valid":e.valid,"is-invalid":e.invalid}}}return r.\u0275fac=function(e){return new(e||r)(s.Vb(t.b),s.Vb(l.a),s.Vb(u.a),s.Vb(d.b))},r.\u0275cmp=s.Pb({type:r,selectors:[["app-agregar"]],decls:3,vars:1,consts:[[1,"row","justify-content-center","mt-3"],[1,"col-md-10","col-sm-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[3,"formGroup","ngSubmit"],[1,"card-header","text-center"],[1,"text-muted"],[1,"float-left"],["routerLink","/usuarios",1,"btn","btm-sm","btn-light","shadow"],[1,"fas","fa-arrow-left"],[1,"card-body"],[1,"container","text-center"],[3,"avatarSelected"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["type","text","formControlName","Nombre",1,"form-control",3,"ngClass"],[1,"valid-feedback"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","formControlName","Apellido",1,"form-control",3,"ngClass"],["formControlName","TipoDocumento",1,"form-control",3,"ngClass"],["value","TI"],["value","CC"],["type","number","formControlName","NumeroDocumento",1,"form-control",3,"ngClass"],["type","date","formControlName","FechaNacimiento",1,"form-control",3,"ngClass"],["type","text","formControlName","LugarExpedicion",1,"form-control",3,"ngClass"],["type","text","formControlName","CorreoElectronico",1,"form-control",3,"ngClass"],["type","password","formControlName","Clave",1,"form-control",3,"ngClass"],["formControlName","RolId",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer","text-center"],[1,"row","justify-content-center"],[1,"col-md-4","col-sm-6"],[1,"btn","btn-block","btn-primary",3,"disabled"],[3,"value"]],template:function(r,e){1&r&&(s.ac(0,"div",0),s.ac(1,"div",1),s.Bc(2,y,99,25,"div",2),s.Zb(),s.Zb()),2&r&&(s.Jb(2),s.rc("ngIf",e.formUsuario))},directives:[a.m,t.r,t.h,t.d,d.c,b.a,t.a,t.g,t.c,a.k,t.o,t.k,t.q,t.l,a.l],pipes:[m.a],styles:[""]}),r})();var U=o("j1ZV"),k=o("iTUp");o.d(e,"AgregarModule",(function(){return D}));let D=(()=>{class r{}return r.\u0275mod=s.Tb({type:r}),r.\u0275inj=s.Sb({factory:function(e){return new(e||r)},imports:[[a.b,t.e,t.m,U.a,k.a,d.e.forChild([{path:"",component:x}])]]}),r})()}}]);